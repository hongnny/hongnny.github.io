"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1477],{10:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"http-cache","metadata":{"permalink":"/blog/http-cache","editUrl":"https://github.com/jonbenery/weblog/blog/2023-02-25-cache/index.mdx","source":"@site/blog/2023-02-25-cache/index.mdx","title":"http\u7f13\u5b58","description":"1. \u7f13\u5b58","date":"2023-02-25T00:00:00.000Z","formattedDate":"February 25, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"},{"label":"\u7f51\u7edc","permalink":"/blog/tags/\u7f51\u7edc"}],"readingTime":8.13,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"http-cache","title":"http\u7f13\u5b58","authors":"jonben","tags":["javascript","\u7f51\u7edc"]},"nextItem":{"title":"ADM,CMD\u89c4\u8303","permalink":"/blog/module"}},"content":"import { RenderImg } from \'@site/src/common\'\\n\\n## 1. \u7f13\u5b58\\n\u5408\u7406\u5229\u7528\u7f13\u5b58\u662fWeb\u6027\u80fd\u4f18\u5316\u7684\u5fc5\u8981\u624b\u6bb5\uff0c\u524d\u7aef\u5de5\u7a0b\u5e08\u6240\u63a5\u89e6\u7684\u4e3b\u8981\u662f\u9488\u5bf9\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u7684\u7f13\u5b58\u7b56\u7565\uff0c\u5ba2\u6237\u7aef\u7684\u7f13\u5b58\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u4e24\u79cd\u3002\\n* \u5229\u7528\u672c\u5730\u5b58\u50a8\uff0c\u6bd4\u5982`LocalStorage`\u3001`SessionStorage`\u7b49\u3002\\n* \u5229\u7528**HTTP\u7f13\u5b58\u7b56\u7565**\uff0c\u5176\u4e2d\u53c8\u5206\u4e3a**\u5f3a\u5236\u7f13\u5b58**\u4e0e**\u534f\u5546\u7f13\u5b58**\u3002\\n\\n\u5176\u4e2d\u5bf9\u4e8e\u672c\u5730\u5b58\u50a8\u7684\u5229\u7528\u5c5e\u4e8e\u4ee3\u7801\u67b6\u6784\u5c42\u9762\u7684\u4f18\u5316\u63aa\u65bd\uff0c\u4e0d\u5c5e\u4e8e\u524d\u7aef\u5de5\u7a0b\u4f53\u7cfb\u7684\u670d\u52a1\u8303\u7574\u3002HTTP\u7f13\u5b58\u9700\u8981\u670d\u52a1\u5668\u914d\u5408\uff0c\u6bd4\u5982Apache\u3001Ngnix\u7b49\u670d\u52a1\u5668\u8f6f\u4ef6\u53ef\u4ee5\u4e3a\u8d44\u6e90\u8bbe\u7f6e\u4e0d\u540c\u7684HTTP\u7f13\u5b58\u7b56\u7565\u3002\u589e\u91cf\u66f4\u65b0\u662f\u76ee\u524d\u5927\u90e8\u5206\u56e2\u961f\u91c7\u7528\u7684\u7f13\u5b58\u66f4\u65b0\u65b9\u6848\uff0c\u7ed3\u5408HTTP\u5f3a\u5236\u7f13\u5b58\u7b56\u7565\uff0c\u65e2\u80fd\u591f\u4fdd\u8bc1\u7528\u6237\u5728\u7b2c\u4e00\u65f6\u95f4\u83b7\u53d6\u6700\u65b0\u8d44\u6e90\uff0c\u53c8\u53ef\u4ee5\u51cf\u5c11\u7f51\u7edc\u8d44\u6e90\u6d88\u8017\uff0c\u63d0\u9ad8Web\u5e94\u7528\u7a0b\u5e8f\u7684\u6267\u884c\u901f\u5ea6\u3002\\n\\n## 2. HTTP\u7f13\u5b58\u7b56\u7565\\n\u6d4f\u89c8\u5668\u5bf9\u9759\u6001\u8d44\u6e90\u7684\u7f13\u5b58\u672c\u8d28\u4e0a\u662fHTTP\u534f\u8bae\u7684\u7f13\u5b58\u7b56\u7565\uff0c\u5176\u4e2d\u53c8\u53ef\u4ee5\u5206\u4e3a**\u5f3a\u5236\u7f13\u5b58**\u548c**\u534f\u5546\u7f13\u5b58**\u3002\u4e24\u79cd\u7f13\u5b58\u7b56\u7565\u90fd\u4f1a\u5c06\u8d44\u6e90\u7f13\u5b58\u5230\u672c\u5730\u3002\u5177\u4f53\u91c7\u7528\u54ea\u79cd\u7f13\u5b58\u7b56\u7565\uff0c\u7531`HTTP\u534f\u8bae`\u7684\u9996\u90e8`Headers`\u4fe1\u606f\u51b3\u5b9a\u3002\\n\\n* **\u5f3a\u5236\u7f13\u5b58\u7b56\u7565**\u6839\u636e\u8fc7\u671f\u65f6\u95f4\u51b3\u5b9a\u4f7f\u7528\u672c\u5730\u7f13\u5b58\u8fd8\u662f\u8bf7\u6c42\u65b0\u8d44\u6e90\u3002\\n* **\u534f\u5546\u7f13\u5b58**\u6bcf\u6b21\u90fd\u4f1a\u53d1\u51fa\u8bf7\u6c42\uff0c\u7ecf\u8fc7\u670d\u52a1\u5668\u8fdb\u884c\u5bf9\u6bd4\u540e\u51b3\u5b9a\u91c7\u7528\u672c\u5730\u7f13\u5b58\u8fd8\u662f\u65b0\u8d44\u6e90\u3002\\n\\n\\n\\n### 2.1 Expires \u548c max-age\\n`Expires`\u548c`max-age`\u662f\u5f3a\u5236\u7f13\u5b58\u7b56\u7565\u7684\u5173\u952e\u4fe1\u606f\uff0c\u4e24\u8005\u5747\u662f\u54cd\u5e94\u9996\u90e8\u4fe1\u606f\u7684\u3002\\n\\n`Expires`\u662f**HTTP 1.0**\u52a0\u5165\u7684\u7279\u6027\uff0c\u901a\u8fc7\u6307\u5b9a\u4e00\u4e2a\u660e\u786e\u7684\u65f6\u95f4\u70b9\u4f5c\u4e3a\u7f13\u5b58\u8d44\u6e90\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u5728\u6b64\u65f6\u95f4\u70b9\u4e4b\u524d\u5ba2\u6237\u7aef\u5c06\u4f7f\u7528\u672c\u5730\u7f13\u5b58\u7684\u6587\u4ef6\u5e94\u7b54\u8bf7\u6c42\uff0c\u800c\u4e0d\u4f1a\u5411\u670d\u52a1\u5668\u53d1\u51fa\u5b9e\u4f53\u8bf7\u6c42\uff08\u5728\u6d4f\u89c8\u5668\u8c03\u8bd5\u9762\u677f\u4e2d\u53ef\u4ee5\u770b\u5230\u6b64\u8bf7\u6c42\u5e76\u4e14\u72b6\u6001\u7801\u4e3a200\uff09\u3002\\n\\n`Expires`\u7684\u4f18\u70b9\uff1a\\n\\n\u53ef\u4ee5\u5728\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u5185\u51cf\u5c11\u5ba2\u6237\u7aef\u7684HTTP\u8bf7\u6c42\uff0c\u4e0d\u4ec5\u8282\u7701\u4e86\u5ba2\u6237\u7aef\u5904\u7406\u65f6\u95f4\u548c\u63d0\u9ad8\u4e86Web\u5e94\u7528\u7684\u6267\u884c\u901f\u5ea6\uff0c\u800c\u4e14\u4e5f\u51cf\u5c11\u4e86\u670d\u52a1\u5668\u8d1f\u8f7d\u4ee5\u53ca\u5ba2\u6237\u7aef\u7f51\u7edc\u8d44\u6e90\u7684\u6d88\u8017\u3002\u4e00\u4e2a\u5178\u578b\u7684`Expires`\u9996\u90e8\u4fe1\u606f\u5982\u4e0b\uff1a\\n\\n```\\nExpoores:Web, 23 Aug 2017 14:00:00 FMT\\n```\\n\\n\u8be5\u4fe1\u606f\u6307\u5b9a\u5bf9\u5e94\u8d44\u6e90\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u4e3a2017\u5e748\u670823\u65e514\u70b9\u3002\\n\\n`Expires`\u6709\u4e00\u4e2a\u81f4\u547d\u7684\u7f3a\u9677\u662f\uff1a\\n\\n\u5b83\u6240\u6307\u5b9a\u7684\u65f6\u95f4\u70b9\u662f\u4ee5\u670d\u52a1\u5668\u4e3a\u51c6\u7684\u65f6\u95f4\uff0c\u4f46\u662f\u5ba2\u6237\u7aef\u8fdb\u884c\u8fc7\u671f\u5224\u65ad\u65f6\u662f\u5c06\u672c\u5730\u7684\u65f6\u95f4\u4e0e\u6b64\u65f6\u95f4\u70b9\u5bf9\u6bd4\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u7684\u65f6\u95f4\u4e0e\u670d\u52a1\u5668\u5b58\u5728\u8bef\u5dee\uff0c\u6bd4\u5982\u670d\u52a1\u5668\u7684\u65f6\u95f4\u662f`2017\u5e748\u670823\u65e513\u70b9`\uff0c\u800c\u5ba2\u6237\u7aef\u7684\u65f6\u95f4\u662f`2017\u5e748\u670823\u65e515\u70b9`\uff0c\u90a3\u4e48\u901a\u8fc7\u4e0a\u8ff0Expires\u63a7\u5236\u7684\u7f13\u5b58\u8d44\u6e90\u5c06\u4f1a\u5931\u6548\uff0c\u5ba2\u6237\u7aef\u5c06\u4f1a\u53d1\u9001\u5b9e\u4f53\u8bf7\u6c42\u83b7\u53d6\u5bf9\u5e94\u8d44\u6e90\u3002\u8fd9\u663e\u7136\u662f\u4e0d\u5408\u7406\u7684\u3002\\n\\n\u9488\u5bf9\u8fd9\u4e2a\u95ee\u9898\uff0c**HTTP 1.1**\u65b0\u589e\u4e86`Cache-control`\u9996\u90e8\u4fe1\u606f\u4ee5\u4fbf\u66f4\u7cbe\u51c6\u5730\u63a7\u5236\u7f13\u5b58\u3002\\n\\n\u5e38\u7528\u7684`Cache-control`\u4fe1\u606f\u6709\u4ee5\u4e0b\u51e0\u79cd:\\n\\n1. `no-cache`\u548c`no-store`\uff1a\\n\\n* `no-cache`\u5e76\u975e\u7981\u6b62\u7f13\u5b58\uff0c\u800c\u662f\u9700\u8981\u5148\u4e0e\u670d\u52a1\u5668\u786e\u8ba4\u8fd4\u56de\u7684\u54cd\u5e94\u662f\u5426\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u5982\u679c\u8d44\u6e90\u672a\u53d1\u751f\u53d8\u5316\uff0c\u5219\u53ef\u4f7f\u7528\u7f13\u5b58\u526f\u672c\u4ece\u800c\u907f\u514d\u4e0b\u8f7d\u3002\\n\\n* `no-store`\u662f\u771f\u6b63\u610f\u4e49\u4e0a\u7684\u7981\u6b62\u7f13\u5b58\uff0c\u7981\u6b62\u6d4f\u89c8\u5668\u4ee5\u53ca\u6240\u6709\u4e2d\u95f4\u7f13\u5b58\u5b58\u50a8\u4efb\u4f55\u7248\u672c\u7684\u8fd4\u56de\u54cd\u5e94\u3002\u6bcf\u6b21\u7528\u6237\u90fd\u4f1a\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\uff0c\u5e76\u4e0b\u8f7d\u5b8c\u6574\u7684\u54cd\u5e94\u3002\\n2. `public`\u548c`private`\uff1a\\n\\n* `public`\u8868\u793a\u6b64\u54cd\u5e94\u53ef\u4ee5\u88ab\u6d4f\u89c8\u5668\u4ee5\u53ca\u4e2d\u95f4\u7f13\u5b58\u5668\u65e0\u9650\u671f\u7f13\u5b58\uff0c\u6b64\u4fe1\u606f\u5e76\u4e0d\u5e38\u7528\uff0c\u5e38\u89c4\u65b9\u6848\u662f\u4f7f\u7528`max-age`\u6307\u5b9a\u7cbe\u786e\u7684\u7f13\u5b58\u65f6\u95f4\u3002\\n* `private`\u8868\u793a\u6b64\u54cd\u5e94\u53ef\u4ee5\u88ab\u7528\u6237\u6d4f\u89c8\u5668\u7f13\u5b58\uff0c\u4f46\u662f\u4e0d\u5141\u8bb8\u4efb\u4f55\u4e2d\u95f4\u7f13\u5b58\u5668\u5bf9\u5176\u8fdb\u884c\u7f13\u5b58\u3002\u4f8b\u5982\uff0c\u7528\u6237\u7684\u6d4f\u89c8\u5668\u53ef\u4ee5\u7f13\u5b58\u5305\u542b\u7528\u6237\u79c1\u4eba\u4fe1\u606f\u7684HTML\u7f51\u9875\uff0c\u4f46CDN\u5374\u4e0d\u80fd\u7f13\u5b58\u3002\\n3. `max-age`\uff1a\\n\u6307\u5b9a\u4ece\u8bf7\u6c42\u7684\u65f6\u523b\u5f00\u59cb\u8ba1\u7b97\uff0c\u6b64\u54cd\u5e94\u7684\u7f13\u5b58\u526f\u672c\u6709\u6548\u7684\u6700\u957f\u65f6\u95f4\uff08\u5355\u4f4d\uff1a\u79d2\uff09\u3002\u4f8b\u5982\uff0c`max-age=3600`\u8868\u793a\u6d4f\u89c8\u5668\u5728\u63a5\u4e0b\u6765\u76841\u5c0f\u65f6\u5185\u4f7f\u7528\u6b64\u54cd\u5e94\u7684\u672c\u5730\u7f13\u5b58\uff0c\u4e0d\u4f1a\u53d1\u9001\u5b9e\u4f53\u8bf7\u6c42\u5230\u670d\u52a1\u5668\u3002\\n`max-age`\u6307\u5b9a\u7684\u662f**\u7f13\u5b58\u7684\u65f6\u95f4\u8de8\u5ea6\uff0c\u800c\u975e\u7f13\u5b58\u5931\u6548\u7684\u65f6\u95f4\u70b9**\uff0c\u4e0d\u4f1a\u53d7\u5230\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u65f6\u95f4\u8bef\u5dee\u7684\u5f71\u54cd\u3002\u6240\u4ee5\uff0c\u4e0e`Expires`\u76f8\u6bd4\uff0c`max-age`\u53ef\u4ee5\u66f4\u7cbe\u786e\u5730\u63a7\u5236\u7f13\u5b58\uff0c\u5e76\u4e14\u6bd4`Expires`**\u6709\u66f4\u9ad8\u7684\u4f18\u5148\u7ea7**\u3002\\n\\n\u5f3a\u5236\u7f13\u5b58\u7b56\u7565\u4e0b\uff08Cache-control\u672a\u6307\u5b9ano-cache\u548cno-store\uff09\u7684\u7f13\u5b58\u5224\u65ad\u6d41\u7a0b\u5982\u56fe\u6240\u793a:\\n\\n<RenderImg\\n  src={ require(\'./img/cache1.png\') } />\\n  \\n\\n### 2.2 Etag \u548c If-none-match\\n```\\nHTTP/1.1 200 OK\\nDate: Fri, 30 Oct 1998 13:19:41 GMT\\nServer: Apache/1.3.3 (Unix)\\nCache-Control: max-age=3600, must-revalidate\\nExpires: Fri, 30 Oct 1998 14:19:41 GMT\\nLast-Modified: Mon, 29 Jun 1998 02:28:12 GMT\\nETag: \\"3e86-410-3596fbbc\\"\\nContent-Length: 1040\\nContent-Type: text/html\\n```\\n`Etag`\u662f**\u670d\u52a1\u5668\u4e3a\u8d44\u6e90\u5206\u914d\u7684\u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\u7684\u552f\u4e00\u6027\u6807\u8bc6**\uff0c\u4f5c\u4e3a\u54cd\u5e94\u9996\u90e8\u4fe1\u606f\u8fd4\u56de\u7ed9\u6d4f\u89c8\u5668\u3002\u6d4f\u89c8\u5668\u5728`Cache-control`\u6307\u5b9a`no-cache`\u6216\u8005`max-age`\u548c`Expires`\u5747\u8fc7\u671f\u4e4b\u540e\uff0c\u5c06`Etag`\u503c\u901a\u8fc7`If-none-match`\u4f5c\u4e3a\u8bf7\u6c42\u9996\u90e8\u4fe1\u606f\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u3002\u670d\u52a1\u5668\u63a5\u6536\u5230\u8bf7\u6c42\u4e4b\u540e\uff0c\u5bf9\u6bd4\u6240\u8bf7\u6c42\u8d44\u6e90\u7684`Etag`\u503c\u662f\u5426\u6539\u53d8\uff0c\u5982\u679c\u672a\u6539\u53d8\u5c06\u8fd4\u56de`304 Not Modified`\uff0c\u5e76\u4e14\u6839\u636e\u65e2\u5b9a\u7684\u7f13\u5b58\u7b56\u7565\u5206\u914d\u65b0\u7684`Cache-control`\u4fe1\u606f\uff1b\u5982\u679c\u8d44\u6e90\u53d1\u751f\u4e86\u6539\u53d8\uff0c\u5219\u4f1a\u8fd4\u56de\u6700\u65b0\u7684\u8d44\u6e90\u4ee5\u53ca\u91cd\u65b0\u5206\u914d\u7684`Etag`\u503c\u3002\u6574\u4f53\u6d41\u7a0b\u5982\u56fe\u6240\u793a:\\n\\n<RenderImg\\n  src={ require(\'./img/cache2.png\') } />\\n\\n\u5982\u679c\u5f3a\u5236\u6d4f\u89c8\u5668\u4f7f\u7528`\u534f\u5546\u7f13\u5b58\u7b56\u7565`\uff0c\u9700\u8981\u5c06`Cache-control`\u9996\u90e8\u4fe1\u606f\u8bbe\u7f6e\u4e3a`no-cache`\uff0c\u8fd9\u6837\u4fbf\u4e0d\u4f1a\u5224\u65ad`max-age`\u548c`Expires`\u8fc7\u671f\u65f6\u95f4\uff0c\u4ece\u800c\u6bcf\u6b21\u8d44\u6e90\u8bf7\u6c42\u90fd\u4f1a\u7ecf\u8fc7\u670d\u52a1\u5668\u5bf9\u6bd4\u3002\\n\\n## 3. \u603b\u7ed3\\n`\u534f\u5546\u7f13\u5b58`\u5e76\u975e\u662f\u4e00\u79cd\u6bd4`\u5f3a\u5236\u7f13\u5b58`**\u4f4e\u7ea7**\u7684\u7b56\u7565\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u7279\u6b8a\u7684\u5e94\u7528\u573a\u666f\u6216\u8d44\u6e90\uff0c\u534f\u5546\u7f13\u5b58\u662f\u4f18\u4e8e\u5f3a\u5236\u7f13\u5b58\u7684\u3002\u6bd4\u5982\u975e\u670d\u52a1\u5668\u7aef\u6e32\u67d3\u9879\u76ee\u4e2d\u7684HTML\u6587\u6863\uff0c\u7531\u4e8e\u5b83\u662f\u6240\u6709\u5176\u4ed6\u9759\u6001\u8d44\u6e90\u7684\u5f15\u7528\u8005\uff0c\u6240\u4ee5\u5fc5\u987b\u4fdd\u8bc1\u6bcf\u6b21\u8bf7\u6c42\u5230\u7684\u8d44\u6e90\u90fd\u662f\u6700\u65b0\u7684\u3002\u540c\u65f6\uff0c\u4e3a\u4e86\u4fbf\u4e8e\u670d\u52a1\u5668\u89e3\u6790\u548c\u4fdd\u8bc1\u7f51\u7ad9\u5730\u5740\u7684\u552f\u4e00\u6027\uff0chtml\u6587\u4ef6\u4e0d\u80fd\u5e94\u7528hash\u6307\u7eb9\u3002\u5728\u8fd9\u79cd\u573a\u666f\u4e0b\u53ea\u80fd\u4f7f\u7528\u534f\u5546\u7f13\u5b58\u3002"},{"id":"module","metadata":{"permalink":"/blog/module","editUrl":"https://github.com/jonbenery/weblog/blog/2023-02-13-module/index.md","source":"@site/blog/2023-02-13-module/index.md","title":"ADM,CMD\u89c4\u8303","description":"1. AMD","date":"2023-02-13T00:00:00.000Z","formattedDate":"February 13, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"},{"label":"module","permalink":"/blog/tags/module"}],"readingTime":1.59,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"module","title":"ADM,CMD\u89c4\u8303","authors":"jonben","tags":["javascript","module"]},"prevItem":{"title":"http\u7f13\u5b58","permalink":"/blog/http-cache"},"nextItem":{"title":"sessionStroage","permalink":"/blog/sessionStroage"}},"content":"## 1. AMD \\nAMD\u5168\u79f0\u662fAsynchronous Module Definition\uff0c\u5373\u5f02\u6b65\u6a21\u5757\u52a0\u8f7d\u673a\u5236\u3002\u540e\u6765RequireJS\u5b9e\u73b0\u4e86AMD\u89c4\u8303\uff0c\u6240\u4ee5\u4e00\u822c\u8bf4AMD\u4e5f\u662f\u6307RequireJS\u3002\\n\\n### 1. RequireJS\u7684\u57fa\u672c\u7528\u6cd5\\n\u901a\u8fc7`define`\u6765\u5b9a\u4e49\u4e00\u4e2a\u6a21\u5757\uff0c\u4f7f\u7528`require`\u53ef\u4ee5\u5bfc\u5165\u5b9a\u4e49\u7684\u6a21\u5757\u3002\\n```js\\n//a.js\\n// define\u53ef\u4ee5\u4f20\u5165\u4e09\u4e2a\u53c2\u6570\uff0c\u5206\u522b\u662f\u6a21\u5757\u540d(\u5b57\u7b26\u4e32)\u3001\u4f9d\u8d56\u6a21\u5757(\u6570\u7ec4)\u3001\u56de\u8c03\u51fd\u6570(\u51fd\u6570)\\ndefine(function(){\\n    return 1;\\n})\\n\\n// b.js\\n// \u4f9d\u8d56\u8981\u63d0\u524d\u4e66\u5199\\ndefine(\'b\', [\'a\'], function(val){\\n    return val + 1;\\n})\\n\\n// c.js\\n//\u6570\u7ec4\u4e2d\u58f0\u660e\u9700\u8981\u52a0\u8f7d\u7684\u6a21\u5757\uff0c\u53ef\u4ee5\u662f\u6a21\u5757\u540d\u3001js\u6587\u4ef6\u8def\u5f84\\nrequire([\'b\'], function(val){\\n    console.log(val); // 2\\n});\\n```\\n\\n### 2. RequireJS\u7684\u7279\u70b9\\n\u5bf9\u4e8e\u4f9d\u8d56\u7684\u6a21\u5757\uff0cAMD\u63a8\u5d07\u4f9d\u8d56\u524d\u7f6e\uff0c\u63d0\u524d\u6267\u884c\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728define\u65b9\u6cd5\u91cc\u4f20\u5165\u7684\u4f9d\u8d56\u6a21\u5757(\u6570\u7ec4)\uff0c\u4f1a\u5728\u4e00\u5f00\u59cb\u5c31\u4e0b\u8f7d\u5e76\u6267\u884c\u3002\xe5\\n\\n\\n## 2. CMD\\nCMD\u662fSeaJS\u5728\u63a8\u5e7f\u8fc7\u7a0b\u4e2d\u751f\u4ea7\u7684\u5bf9\u6a21\u5757\u5b9a\u4e49\u7684\u89c4\u8303\uff0c\u5728Web\u6d4f\u89c8\u5668\u7aef\u7684\u6a21\u5757\u52a0\u8f7d\u5668\u4e2d\u3002\\n\\n### 1. SeaJS\u7684\u57fa\u672c\u7528\u6cd5\\n```js\\ndefine(function(require, exports, module) {\\n  // \u4f9d\u8d56\u53ef\u4ee5\u5c31\u8fd1\u4e66\u5199\\n  const a = require(\'./a\')\\n  a.doSomething();\\n  const b = require(\'./b\')\\n  b.doSomething();\\n})\\n```\\n\\n### 2.SeaJS\u7684\u7279\u70b9\\n\u5bf9\u4e8e\u4f9d\u8d56\u7684\u6a21\u5757\uff0cCMD\u63a8\u5d07\u4f9d\u8d56\u5c31\u8fd1\uff0c\u5ef6\u8fdf\u6267\u884c\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u6709\u5230require\u65f6\u4f9d\u8d56\u6a21\u5757\u624d\u6267\u884c\u3002"},{"id":"sessionStroage","metadata":{"permalink":"/blog/sessionStroage","editUrl":"https://github.com/jonbenery/weblog/blog/2023-02-10-sessionStorage/index.md","source":"@site/blog/2023-02-10-sessionStorage/index.md","title":"sessionStroage","description":"1. \u6765\u81eaMDN\u7684\u89e3\u91ca","date":"2023-02-10T00:00:00.000Z","formattedDate":"February 10, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"}],"readingTime":2.565,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"sessionStroage","title":"sessionStroage","authors":"jonben","tags":["javascript"]},"prevItem":{"title":"ADM,CMD\u89c4\u8303","permalink":"/blog/module"},"nextItem":{"title":"\u4e8b\u4ef6\u5faa\u73af-\u5b8f\u4efb\u52a1\u548c\u5fae\u4efb\u52a1","permalink":"/blog/eventLoop"}},"content":"## 1. \u6765\u81eaMDN\u7684\u89e3\u91ca\\n[MDN](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/sessionStorage)\\n\\n`sessionStorage`\u5c5e\u6027\u5141\u8bb8\u4f60\u8bbf\u95ee\u4e00\u4e2a\uff0c\u5bf9\u5e94\u5f53\u524d\u6e90\u7684`session Storage`\u5bf9\u8c61\u3002\u5b83\u4e0e`localStorage`\u76f8\u4f3c\uff0c\u4e0d\u540c\u4e4b\u5904\u5728\u4e8e`localStorage`\u91cc\u9762\u5b58\u50a8\u7684\u6570\u636e\u6ca1\u6709\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\uff0c\u800c\u5b58\u50a8\u5728`sessionStorage`\u91cc\u9762\u7684\u6570\u636e\u5728\u9875\u9762\u4f1a\u8bdd\u7ed3\u675f\u65f6\u4f1a\u88ab\u6e05\u9664\u3002\\n\\n\\n* \u9875\u9762\u4f1a\u8bdd\u5728\u6d4f\u89c8\u5668\u6253\u5f00\u671f\u95f4\u4e00\u76f4\u4fdd\u6301\uff0c\u5e76\u4e14\u91cd\u65b0\u52a0\u8f7d\u6216\u6062\u590d\u9875\u9762\u4ecd\u4f1a\u4fdd\u6301\u539f\u6765\u7684\u9875\u9762\u4f1a\u8bdd\u3002\\n* **\u5728\u65b0\u6807\u7b7e\u6216\u7a97\u53e3\u6253\u5f00\u4e00\u4e2a\u9875\u9762\u65f6\u4f1a\u590d\u5236\u9876\u7ea7\u6d4f\u89c8\u4f1a\u8bdd\u7684\u4e0a\u4e0b\u6587\u4f5c\u4e3a\u65b0\u4f1a\u8bdd\u7684\u4e0a\u4e0b\u6587\uff0c**\u8fd9\u70b9\u548c`session cookies`\u7684\u8fd0\u884c\u65b9\u5f0f\u4e0d\u540c\u3002\\n* \u6253\u5f00\u591a\u4e2a\u76f8\u540c\u7684`URL`\u7684`Tabs`\u9875\u9762\uff0c\u4f1a\u521b\u5efa\u5404\u81ea\u7684`sessionStorage`\u3002\\n* \u5173\u95ed\u5bf9\u5e94\u6d4f\u89c8\u5668\u6807\u7b7e\u6216\u7a97\u53e3\uff0c\u4f1a\u6e05\u9664\u5bf9\u5e94\u7684`sessionStorage`\u3002\\n\\n\\n## 2. \u6848\u4f8b\\n\\n\u73b0\u6709\u4e00\u4e2a\u9875\u9762A\uff0c\u6267\u884c\u4e0b\u9762\u4ee3\u7801\\n```js\\n  window.sessionStorage.setItem(\'init\', \'\u521d\u59cb\u5316\')\\n```\\n\u5728A\u9875\u9762\u6709\u4e2a\u6309\u94ae\uff0c\u70b9\u51fb\u540e\u901a\u8fc7`window.open(location.href)`\u6253\u5f00\u540c\u6e90\u7684\u9875\u9762\uff0c\u7136\u540e\u5728\u8be5\u9875\u9762\u83b7\u53d6`sessionStorage`\\n```js\\nwindow.sessionStorage.getItem(\'init\') // \u521d\u59cb\u5316\\n```\\n\u7ed3\u679c\uff0c\u6211\u4eec\u53d1\u73b0`sessionStorage`\u5728\u6253\u5f00\u65b0\u7a97\u53e3\u540e\u662f\u53ef\u4ee5\u5171\u4eab`sessionStorage`\u7684\u3002\\n\\n\\n\u63a5\u4e0b\u6765\u6211\u4eec\u63a5\u7740\u6d4b\u8bd5\\n\\n\u5728\u4e0a\u6b21\u6848\u4f8b\u6253\u5f00\u7684`A`\u9875\u9762\u4e0b\u7ee7\u7eed\u6267\u884c\u4ee5\u4e0b\u4ee3\u7801\uff1a\\n```js\\nwindow.sessionStorage.setItem(\'init\', \'\u88ab\u4fee\u6539\')\\nwindow.sessionStorage.setItem(\'name\', \'jonben\')\\n```\\n\\n\u7136\u540e\u5728\u65b0\u5f00\u7684`\u540c\u6e90\u7a97\u53e3`\u6267\u884c\u4ee5\u4e0b\u4ee3\u7801\uff1a\\n```js\\nwindow.sessionStorage.getItem(\'init\') // \u521d\u59cb\u5316\\nwindow.sessionStorage.getItem(\'name\') // null\\n```\\n\u7ed3\u679c\uff0c\u6211\u4eec\u53d1\u73b0\u83b7\u53d6`init`\u7684\u503c\u4ecd\u7136\u88ab\u4fee\u6539\u524d\u7684\u503c\uff0c\u800c`name`\u7684\u503c\u786e\u662f`null`\u3002\\n\\n\u6211\u4eec\u73b0\u5728\u518d\u56de\u53bb\u7406\u89e3\u4e00\u4e0bMDN\u7684\u8bf4\u6cd5\uff1a**\u5728\u65b0\u6807\u7b7e\u6216\u7a97\u53e3\u6253\u5f00\u4e00\u4e2a\u9875\u9762\u65f6\u4f1a\u590d\u5236\u9876\u7ea7\u6d4f\u89c8\u4f1a\u8bdd\u7684\u4e0a\u4e0b\u6587\u4f5c\u4e3a\u65b0\u4f1a\u8bdd\u7684\u4e0a\u4e0b\u6587\uff0c**\u3002\\n\\n\u539f\u6765\u53ea\u6709\u5728\u672c\u9875\u9762\u4e2d\u4ee5\u65b0\u9875\u7b7e\u6216\u7a97\u53e3\u6253\u5f00\u7684\u540c\u6e90\u9875\u9762\u4f1a`\u4e34\u65f6\u5171\u4eab`\u4e4b\u524d\u9875\u9762\u7684`sessionStorage`\u3002\u4ee5\u540e\u8bbe\u7f6e\u7684\u65b0\u7684`sessionStorage`\u662f\u4e0d\u80fd\u88ab\u5171\u4eab\u7684\u3002\\n\\n## 3. \u603b\u7ed3\\n\\n\u591a\u7a97\u53e3\u4e4b\u95f4`sessionStorage`\u4e0d\u53ef\u4ee5\u5171\u4eab\u72b6\u6001\uff0c\u4f46\u662f\u5728\u67d0\u4e9b\u7279\u5b9a\u573a\u666f\u4e0b\u65b0\u5f00\u7684\u9875\u9762\u4f1a\u590d\u5236\u4e4b\u524d\u9875\u9762\u7684`sessionStorage`\uff01\uff01"},{"id":"eventLoop","metadata":{"permalink":"/blog/eventLoop","editUrl":"https://github.com/jonbenery/weblog/blog/2023-02-01-eventLoop/index.mdx","source":"@site/blog/2023-02-01-eventLoop/index.mdx","title":"\u4e8b\u4ef6\u5faa\u73af-\u5b8f\u4efb\u52a1\u548c\u5fae\u4efb\u52a1","description":"1. \u4ec0\u4e48\u662f\u4e8b\u4ef6\u5faa\u73af","date":"2023-02-01T00:00:00.000Z","formattedDate":"February 1, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"}],"readingTime":10.685,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"eventLoop","title":"\u4e8b\u4ef6\u5faa\u73af-\u5b8f\u4efb\u52a1\u548c\u5fae\u4efb\u52a1","authors":"jonben","tags":["javascript"]},"prevItem":{"title":"sessionStroage","permalink":"/blog/sessionStroage"},"nextItem":{"title":"js\u6536\u96c6\u9519\u8bef\u65e5\u5fd7","permalink":"/blog/catchJsError"}},"content":"import { RenderImg } from \'@site/src/common\'\\n\\n## 1. \u4ec0\u4e48\u662f\u4e8b\u4ef6\u5faa\u73af\\n\\n\u5728\u4e86\u89e3\u4e8b\u4ef6\u5faa\u73af\u524d\uff0c\u9700\u8981\u4e00\u4e9b\u6709\u5173JS\u7279\u6027\u7684\u524d\u7f6e\u77e5\u8bc6\u3002\\n\\nJS\u5f15\u64ce\u662f\u5355\u7ebf\u7a0b\u7684\uff0c\u76f4\u767d\u6765\u8bf4\u5c31\u662f\u4e00\u4e2a\u65f6\u95f4\u70b9\u4e0bJS\u5f15\u64ce\u53ea\u80fd\u53bb\u505a\u4e00\u4ef6\u4e8b\u60c5\uff0c\u800cJava\u8fd9\u79cd\u591a\u7ebf\u7a0b\u8bed\u8a00\uff0c\u53ef\u4ee5\u540c\u65f6\u505a\u51e0\u4ef6\u4e8b\u60c5\u3002\\n\\nJS\u505a\u7684\u4efb\u52a1\u5206\u4e3a\u540c\u6b65\u548c\u5f02\u6b65\u4e24\u79cd\uff0c\u6240\u8c13 \\"\u5f02\u6b65\\"\uff0c\u7b80\u5355\u8bf4\u5c31\u662f\u4e00\u4e2a\u4efb\u52a1\u4e0d\u662f\u8fde\u7eed\u5b8c\u6210\u7684\uff0c\u5148\u6267\u884c\u7b2c\u4e00\u6bb5\uff0c\u7b49\u505a\u597d\u4e86\u51c6\u5907\uff0c\u518d\u56de\u8fc7\u5934\u6267\u884c\u7b2c\u4e8c\u6bb5\uff0c\u7b2c\u4e8c\u6bb5\u4e5f\u88ab\u53eb\u505a\u56de\u8c03\uff1b\u540c\u6b65\u5219\u662f\u8fde\u8d2f\u5b8c\u6210\u7684\u3002\\n\u50cf\u8bfb\u53d6\u6587\u4ef6\u3001\u7f51\u7edc\u8bf7\u6c42\u8fd9\u79cd\u4efb\u52a1\u5c5e\u4e8e\u5f02\u6b65\u4efb\u52a1\uff1a\u82b1\u8d39\u65f6\u95f4\u5f88\u957f\uff0c\u4f46\u4e2d\u95f4\u7684\u64cd\u4f5c\u4e0d\u9700\u8981JS\u5f15\u64ce\u81ea\u5df1\u5b8c\u6210\uff0c\u5b83\u53ea\u7528\u7b49\u522b\u4eba\u51c6\u5907\u597d\u4e86\uff0c\u628a\u6570\u636e\u7ed9\u4ed6\uff0c\u4ed6\u518d\u7ee7\u7eed\u6267\u884c\u56de\u8c03\u90e8\u5206\u3002\\n\\n\u5982\u679c\u6ca1\u6709\u7279\u6b8a\u5904\u7406\uff0cJS\u5f15\u64ce\u5728\u6267\u884c\u5f02\u6b65\u4efb\u52a1\u65f6\uff0c\u5e94\u8be5\u662f\u5b58\u5728\u7b49\u5f85\u7684\uff0c\u4e0d\u53bb\u505a\u4efb\u4f55\u5176\u4ed6\u4e8b\u60c5\u3002\u7528\u4e00\u4e2a\u56fe\u6765\u5c55\u793a\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u770b\u51fa\uff0c\u5728\u6267\u884c\u5f02\u6b65\u4efb\u52a1\u65f6\u6709\u5927\u91cf\u7684\u7a7a\u95f2\u65f6\u95f4\u88ab\u6d6a\u8d39\u3002\\n\\n<RenderImg \\n  src={require(\'./img/thread.png\')}\\n  text=\'\u5927\u90e8\u5206\u8bed\u8a00\u7684\u7ebf\u7a0b\'\\n  />\\n\\n\\n\u5b9e\u9645\u4e0a\u8fd9\u662f\u5927\u591a\u6570\u591a\u7ebf\u7a0b\u8bed\u8a00\u7684\u5904\u7406\u529e\u6cd5\u3002\u4f46\u5bf9\u4e8eJS\u8fd9\u79cd\u5355\u7ebf\u7a0b\u8bed\u8a00\u6765\u8bf4\uff0c\u8fd9\u79cd\u957f\u65f6\u95f4\u7684\u7a7a\u95f2\u7b49\u5f85\u662f\u4e0d\u53ef\u63a5\u53d7\u7684\uff1a\u9047\u5230\u5176\u4ed6\u7d27\u6025\u4efb\u52a1\uff0cJava\u53ef\u4ee5\u518d\u5f00\u4e00\u4e2a\u7ebf\u7a0b\u53bb\u5904\u7406\uff0cJS\u5374\u53ea\u80fd\u5fd9\u7b49\u3002\\n\\n\\n\u6240\u4ee5\u91c7\u53d6\u4e86\u4ee5\u4e0b\u7684\u201c\u5f02\u6b65\u4efb\u52a1\u56de\u8c03\u901a\u77e5\u201d\u6a21\u5f0f\uff1a\\n\\n<RenderImg \\n  src={require(\'./img/js-thread.png\')}\\n  text=\'js\u7ebf\u7a0b\'\\n/>\\n\\n\u5728\u7b49\u5f85\u5f02\u6b65\u4efb\u52a1\u51c6\u5907\u7684\u540c\u65f6\uff0cJS\u5f15\u64ce\u53bb\u6267\u884c\u5176\u4ed6\u540c\u6b65\u4efb\u52a1\uff0c\u7b49\u5230\u5f02\u6b65\u4efb\u52a1\u51c6\u5907\u597d\u4e86\uff0c\u518d\u53bb\u6267\u884c\u56de\u8c03\u3002\u8fd9\u79cd\u6a21\u5f0f\u7684\u4f18\u52bf\u663e\u800c\u6613\u89c1\uff0c\u5b8c\u6210\u76f8\u540c\u7684\u4efb\u52a1\uff0c\u82b1\u8d39\u7684\u65f6\u95f4\u5927\u5927\u51cf\u5c11\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4e5f\u88ab\u53eb\u505a\u975e\u963b\u585e\u5f0f\u3002\\n\\n\u800c\u5b9e\u73b0\u8fd9\u4e2a\u201c\u901a\u77e5\u201d\u7684\uff0c\u6b63\u662f\u4e8b\u4ef6\u5faa\u73af\uff0c\u628a\u5f02\u6b65\u4efb\u52a1\u7684\u56de\u8c03\u90e8\u5206\u4ea4\u7ed9\u4e8b\u4ef6\u5faa\u73af\uff0c\u7b49\u65f6\u673a\u5408\u9002\u4ea4\u8fd8\u7ed9JS\u7ebf\u7a0b\u6267\u884c\u3002\u4e8b\u4ef6\u5faa\u73af\u5e76\u4e0d\u662fJavaScript\u9996\u521b\u7684\uff0c\u5b83\u662f\u8ba1\u7b97\u673a\u7684\u4e00\u79cd\u8fd0\u884c\u673a\u5236\u3002\\n\\n\u4e8b\u4ef6\u5faa\u73af\u662f\u7531\u4e00\u4e2a\u961f\u5217\u7ec4\u6210\u7684\uff0c\u5f02\u6b65\u4efb\u52a1\u7684\u56de\u8c03\u9075\u5faa\u5148\u8fdb\u5148\u51fa\uff0c\u5728JS\u5f15\u64ce\u7a7a\u95f2\u65f6\u4f1a\u4e00\u8f6e\u4e00\u8f6e\u5730\u88ab\u53d6\u51fa\uff0c\u6240\u4ee5\u88ab\u53eb\u505a\u5faa\u73af\u3002\\n\\n\u6839\u636e\u961f\u5217\u4e2d\u4efb\u52a1\u7684\u4e0d\u540c\uff0c\u5206\u4e3a\u5b8f\u4efb\u52a1\u548c\u5fae\u4efb\u52a1\uff0c\u5b8f\u4efb\u52a1\uff08macroTask\uff09\u548c\u5fae\u4efb\u52a1\uff08microTask\uff09\uff0c\u90fd\u662fJavaScript\u4e2d\u5f02\u6b65\u4e2d\u7684\u4e00\u4e9b\u6982\u5ff5\u3002\\n\\n\\n\\n<RenderImg\\n  src={require(\'./img/eventloop1.png\')}\\n  title=\\"\u4e8b\u4ef6\u5faa\u73af\\"\\n  />\\n\\n\u9996\u5148\u6211\u4eec\u77e5\u9053\uff0c`js`\u662f\u5355\u7ebf\u7a0b\u4e86\uff0c\u6309\u7167\u987a\u5e8f\u4e00\u884c\u4e00\u884c\u6267\u884c\uff0c\u5982\u679c\u67d0\u884c\u62a5\u9519\u5219\u505c\u6b62\u540e\u7eed\u6267\u884c\uff0c\u7136\u540e\u5c31\u662f\u5148\u6267\u884c\u540c\u6b65\uff0c\u518d\u6267\u884c\u5f02\u6b65\uff0c\u770b\u56fe\uff0c\u6211\u4eec\u4f1a\u5c06\u540c\u6b65\u4ee3\u7801\u4e00\u884c\u4e00\u884c\u653e\u5165`Call Stack`\u4e2d\u6267\u884c\uff0c\u9047\u5230\u5f02\u6b65\uff0c\u5c31\u4f1a\u79fb\u52a8\u5230`Web APIs`\u4e2d\u8bb0\u5f55\u4e0b\u6765\uff0c\u7b49\u5f85\u65f6\u673a\uff0c\u5982\u679c\u65f6\u673a\u5230\u4e86\uff0c\u5c06\u5176\u79fb\u52a8\u5230`Callback Queue`\u4e2d\uff0c\u5982\u679c\u540c\u6b65\u4ee3\u7801\u6267\u884c\u5b8c\uff0c\u4e5f\u5c31\u662f`Call Stack\u4e3a`\u7a7a\uff0c\u518d\u89e6\u53d1`Event Loop`\u673a\u5236\uff0c`Event Loop`\u5f00\u59cb\u5de5\u4f5c\uff0c\u8f6e\u8be2\u67e5\u627e`Callback Queue`\uff0c\u5982\u679c\u6709\u5c31\u79fb\u52a8\u5230`Call Stack`\u4e2d\u6267\u884c\\n\\n### \u9996\u5148\u6211\u4eec\u6765\u770b`setTimeout`\\n\\n<RenderImg\\n  src={require(\'./img/eventloop2.png\')}\\n  title=\\"\u4e8b\u4ef6\u5faa\u73af-setTimeout\\"\\n  />\\n\\n\u6839\u636e\u4e8b\u4ef6\u5faa\u73af\u7684\u673a\u5236\u6700\u7ec8\u5c06`setTimeout`\u4ece`Call Stack`\u4e2d\u79fb\u5165\u5230`Callback Queue`\u4e2d\uff0c\u7136\u540e\u6309\u7167\u56fe\u4e2d\u987a\u5e8f\u6267\u884c`1\uff0c2\uff0c3`\uff1b\\n\\n### \u5176\u6b21\u662f`Promise.then`\uff1a\\n\\n<RenderImg\\n  src={require(\'./img/eventloop3.png\')}\\n  title=\\"\u4e8b\u4ef6\u5faa\u73af-Promise.then\\"\\n  />\\n\\n`Promise`\u662f`ES6`\u89c4\u8303\u7684\uff0c\u4e0d\u662f`W3C`\u89c4\u8303\u7684\u6240\u4ee5\u4e0d\u7ecf\u8fc7`Web APIs`\uff0c\u6b64\u5916\u4e0e\u5b8f\u4efb\u52a1\u4e0d\u540c\u7684\u4e00\u70b9\u662f\uff0c\u6709\u81ea\u5df1\u72ec\u7279\u7684`micro task queue`\uff0c\u8fd9\u662f\u4e3a\u4ec0\u4e48\u5462\uff1f\\n\\n* \u5fae\u4efb\u52a1\u662fES6\u8bed\u6cd5\u89c4\u5b9a\u7684\\n* \u5b8f\u4efb\u52a1\u662f\u7531\u6d4f\u89c8\u5668\u89c4\u5b9a\u7684 \u89c4\u5b9a\u7684\u5730\u65b9\u4e0d\u4e00\u6837\u5bfc\u81f4\u5b58\u653e\u4f4d\u7f6e\u7684\u4e0d\u4e00\u6837\uff0c\u6240\u4ee5\u624d\u6709\u4e86\u56fe\u4e2d\u5b58\u653e\u4f4d\u7f6e\u7684\u4e0d\u540c\u3002\\n\\n### \u6240\u4ee5\u6700\u7ec8\u6211\u4eec\u7684`EventLoop`\u5e94\u8be5\u662f\u8fd9\u6837\uff1a\\n\\n<RenderImg\\n  src={require(\'./img/eventloop4.png\')}\\n  />\\n\\n\\n\\n\\n\\n## 2. \u5b8f\u4efb\u52a1\u548c\u5fae\u4efb\u52a1\\n\\n### \u5b8f\u4efb\u52a1\\n\uff08macro\uff09task\uff0c\u53ef\u4ee5\u7406\u89e3\u662f\u6bcf\u6b21\u6267\u884c\u6808\u6267\u884c\u7684\u4ee3\u7801\u5c31\u662f\u4e00\u4e2a\u5b8f\u4efb\u52a1\uff08\u5305\u62ec\u6bcf\u6b21\u4ece\u4e8b\u4ef6\u961f\u5217\u4e2d\u83b7\u53d6\u4e00\u4e2a\u4e8b\u4ef6\u56de\u8c03\u5e76\u653e\u5230\u6267\u884c\u6808\u4e2d\u6267\u884c\uff09\u3002\\n\\n\u5b8f\u4efb\u52a1\u4e00\u822c\u662f\uff1a** script\u3001setTimeout\u3001setInterval\u3001postMessage\u3001MessageChannel\u3001setImmediate(Node.js \u73af\u5883) **\\n\\n### \u5fae\u4efb\u52a1\\nmicrotask,\u53ef\u4ee5\u7406\u89e3\u662f\u5728\u5f53\u524d task \u6267\u884c\u7ed3\u675f\u540e\u7acb\u5373\u6267\u884c\u7684\u4efb\u52a1\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u5f53\u524dtask\u4efb\u52a1\u540e\uff0c\u4e0b\u4e00\u4e2atask\u4e4b\u524d\uff0c\u5728\u6e32\u67d3\u4e4b\u524d\u3002\\n\u6240\u4ee5\u5b83\u7684\u54cd\u5e94\u901f\u5ea6\u76f8\u6bd4setTimeout\uff08setTimeout\u662ftask\uff09\u4f1a\u66f4\u5feb\uff0c\u56e0\u4e3a\u65e0\u9700\u7b49\u6e32\u67d3\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u67d0\u4e00\u4e2amacrotask\u6267\u884c\u5b8c\u540e\uff0c\u5c31\u4f1a\u5c06\u5728\u5b83\u6267\u884c\u671f\u95f4\u4ea7\u751f\u7684\u6240\u6709microtask\u90fd\u6267\u884c\u5b8c\u6bd5\uff08\u5728\u6e32\u67d3\u524d\uff09\u3002\\n\\n\u5fae\u4efb\u52a1\u4e00\u822c\u662f\uff1a** Promise.then\u3001Object.observe\u3001MutationObserver\u3001process.nextTick(Node.js \u73af\u5883) **\\n\\n\\n### \u6267\u884c\u987a\u5e8f\\n\\n** \u5f02\u6b65\u8ddf\u51fa\u573a\u987a\u5e8f\u6709\u5173\u7cfb\uff0c\u4e0d\u540c\u7c7b\u578b\u7684\u5f02\u6b65\uff08\u5b8f\u4efb\u52a1\u548c\u5fae\u4efb\u52a1\uff09\u8ddf\u51fa\u573a\u987a\u5e8f\u5c31\u6ca1\u5173\u7cfb\u4e86 **\\n\\n\u5148\u6267\u884c\u540c\u6b65\u4ee3\u7801\uff0c\u9047\u5230\u5f02\u6b65\u5b8f\u4efb\u52a1\u5219\u5c06\u5f02\u6b65\u5b8f\u4efb\u52a1\u653e\u5165\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\uff0c\u9047\u5230\u5f02\u6b65\u5fae\u4efb\u52a1\u5219\u5c06\u5f02\u6b65\u5fae\u4efb\u52a1\u653e\u5165\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\uff0c\u5f53\u6240\u6709\u540c\u6b65\u4ee3\u7801\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u518d\u5c06\u5f02\u6b65\u5fae\u4efb\u52a1\u4ece\u961f\u5217\u4e2d\u8c03\u5165\u4e3b\u7ebf\u7a0b\u6267\u884c\uff0c\u5fae\u4efb\u52a1\u6267\u884c\u5b8c\u6bd5\u540e\u518d\u5c06\u5f02\u6b65\u5b8f\u4efb\u52a1\u4ece\u961f\u5217\u4e2d\u8c03\u5165\u4e3b\u7ebf\u7a0b\u6267\u884c\uff0c\u4e00\u76f4\u5faa\u73af\u76f4\u81f3\u6240\u6709\u4efb\u52a1\u6267\u884c\u5b8c\u6bd5\u3002\\n\\n\u8fd9\u91cc\u5bb9\u6613\u4ea7\u751f\u4e00\u4e2a\u9519\u8bef\u7684\u8ba4\u8bc6\uff1a\u5c31\u662f\u5fae\u4efb\u52a1\u5148\u4e8e\u5b8f\u4efb\u52a1\u6267\u884c\u3002\u5b9e\u9645\u4e0a\u662f\u5148\u6267\u884c\u540c\u6b65\u4efb\u52a1\u7136\u540e\u5728\u6267\u884c\u5f02\u6b65\u4efb\u52a1\uff0c\u5f02\u6b65\u4efb\u52a1\u662f\u5206\u5b8f\u4efb\u52a1\u548c\u5fae\u4efb\u52a1\u4e24\u79cd\u7684\u3002\\n\\n\\n### \u6848\u4f8b1\\n```js\\nconsole.log(100)\\nsetTimeout(()=>{\\n    console.log(200)\\n})\\nPromise.resolve().then(()=>{\\n    console.log(300)\\n})\\nconsole.log(400)\\n// \u7b54\u6848\u4e3a\uff1a 100 400 300 200\\n```\\n\u5206\u6790\uff1a\\n\\n1. \u6267\u884c\u540c\u6b65\u4efb\u52a1`console.log(100)`\u8f93\u51fa`100`\\n2. \u9047\u5230`setTimeout`\u5f02\u6b65\u5b8f\u4efb\u52a1\uff0c\u653e\u5165\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\\n3. `Promise.then`\uff0c\u5f02\u6b65\u5fae\u4efb\u52a1\uff0c\u5c06\u5176\u653e\u5165\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\\n4. \u6267\u884c\u540c\u6b65\u4efb\u52a1`console.log(400)`\u8f93\u51fa`400`\uff0c\u4e3b\u7ebf\u7a0b\u4e2d\u540c\u6b65\u4efb\u52a1\u6267\u884c\u5b8c\\n5. \u4ece\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u53d6\u51fa\u4efb\u52a1\u5230\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u8f93\u51fa`300`\uff0c\u5fae\u4efb\u52a1\u961f\u5217\u4e3a\u7a7a\\n6. \u4ece\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\u53d6\u51fa\u4efb\u52a1\u5230\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u8f93\u51fa`200`\uff0c\u5b8f\u4efb\u52a1\u961f\u5217\u4e3a\u7a7a\\n\\n### \u6848\u4f8b2\\n```js\\nsetTimeout(function(){\\n    console.log(1);\\n});\\nnew Promise(function(resolve){\\t\\t    \\n    console.log(2);\\n    resolve();\\n}).then(function(){\\t\\t    \\n    console.log(3);\\n}).then(function(){\\n    console.log(4)\\n}); \\t\\t\\nconsole.log(5);\\n// 2 5 3 4 1\\n```\\n\\n\u5206\u6790\uff1a\\n\\n1. \u9047\u5230`setTimout`\uff0c\u5f02\u6b65\u5b8f\u4efb\u52a1\uff0c\u653e\u5165\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\\n2. \u9047\u5230`new Promise\uff0cnew Promise`\u5728\u5b9e\u4f8b\u5316\u7684\u8fc7\u7a0b\u4e2d\u6240\u6267\u884c\u7684\u4ee3\u7801\u90fd\u662f\u540c\u6b65\u8fdb\u884c\u7684\uff0c\u6240\u4ee5\u8f93\u51fa`2`\\n3. `Promise.then`\uff0c\u5f02\u6b65\u5fae\u4efb\u52a1\uff0c\u5c06\u5176\u653e\u5165\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\\n4. \u9047\u5230\u540c\u6b65\u4efb\u52a1`console.log(5)`;\u8f93\u51fa`5`\uff1b\u4e3b\u7ebf\u7a0b\u4e2d\u540c\u6b65\u4efb\u52a1\u6267\u884c\u5b8c\\n5. \u4ece\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u53d6\u51fa\u4efb\u52a1\u5230\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u8f93\u51fa`3\u3001 4`\uff0c\u5fae\u4efb\u52a1\u961f\u5217\u4e3a\u7a7a\\n6. \u4ece\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\u53d6\u51fa\u4efb\u52a1\u5230\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u8f93\u51fa`1`\uff0c\u5b8f\u4efb\u52a1\u961f\u5217\u4e3a\u7a7a\\n\\n### \u6848\u4f8b3\\n```js\\nsetTimeout(()=>{\\n    new Promise(resolve =>{\\n        resolve();\\n    }).then(()=>{\\n        console.log(\'test\');\\n    });\\n    console.log(4);\\n});\\nnew Promise(resolve => {\\n    resolve();\\n    console.log(1)\\n}).then( () => {\\n    console.log(3);\\n    Promise.resolve().then(() => {\\n        console.log(\'before timeout\');\\n    }).then(() => {\\n        Promise.resolve().then(() => {\\n          console.log(\'also before timeout\')\\n        })\\n    })\\n})\\nconsole.log(2);\\n//1\uff0c2\uff0c3\uff0cbefore timeout\uff0calso before timeout\uff0c4\uff0ctest;\\n```\\n\u5206\u6790\uff1a\\n\\n1. \u9047\u5230`setTimeout`\uff0c\u5f02\u6b65\u5b8f\u4efb\u52a1\uff0c\u5c06`() => {console.log(4)}`\u653e\u5165\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\uff1b\\n2. \u9047\u5230`new Promise\uff0cnew Promise`\u5728\u5b9e\u4f8b\u5316\u7684\u8fc7\u7a0b\u4e2d\u6240\u6267\u884c\u7684\u4ee3\u7801\u90fd\u662f\u540c\u6b65\u8fdb\u884c\u7684\uff0c\u6240\u4ee5\u8f93\u51fa`1`\uff1b\\n3. \u800c`Promise.then`\uff0c\u5f02\u6b65\u5fae\u4efb\u52a1\uff0c\u5c06\u5176\u653e\u5165\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\\n4. \u9047\u5230\u540c\u6b65\u4efb\u52a1`console.log(2)`\uff0c\u8f93\u51fa`2`\uff1b\u4e3b\u7ebf\u7a0b\u4e2d\u540c\u6b65\u4efb\u52a1\u6267\u884c\u5b8c\\n5. \u4ece\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u53d6\u51fa\u4efb\u52a1\u5230\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u8f93\u51fa`3`\uff0c\u6b64\u5fae\u4efb\u52a1\u4e2d\u53c8\u6709\u5fae\u4efb\u52a1\uff0c`Promise.resolve().then(\u5fae\u4efb\u52a1a).then(\u5fae\u4efb\u52a1b)`\uff0c\u5c06\u5176\u4f9d\u6b21\u653e\u5165\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\uff1b\\n6. \u4ece\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u53d6\u51fa\u4efb\u52a1`a`\u5230\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u8f93\u51fa `before timeout`\uff1b\\n7. \u4ece\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u53d6\u51fa\u4efb\u52a1`b`\u5230\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u4efb\u52a1`b`\u53c8\u6ce8\u518c\u4e86\u4e00\u4e2a\u5fae\u4efb\u52a1`c`\uff0c\u653e\u5165\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\uff1b\\n8. \u4ece\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u53d6\u51fa\u4efb\u52a1`c`\u5230\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u8f93\u51fa `also before timeout`\uff1b\u5fae\u4efb\u52a1\u961f\u5217\u4e3a\u7a7a\\n9. \u4ece\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\u53d6\u51fa\u4efb\u52a1\u5230\u4e3b\u7ebf\u7a0b\uff0c\u6b64\u4efb\u52a1\u4e2d\u6ce8\u518c\u4e86\u4e00\u4e2a\u5fae\u4efb\u52a1`d`\uff0c\u5c06\u5176\u653e\u5165\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\uff0c\u63a5\u4e0b\u6765\u9047\u5230\u8f93\u51fa`4`\uff0c\u5b8f\u4efb\u52a1\u961f\u5217\u4e3a\u7a7a\\n10. \u4ece\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u53d6\u51fa\u4efb\u52a1`d`\u5230\u4e3b\u7ebf\u7a0b \uff0c\u8f93\u51fa`test`\uff0c\u5fae\u4efb\u52a1\u961f\u5217\u4e3a\u7a7a\\n\\n## 3. \u7ed3\u8bed\\n\\n\u4e8b\u4ef6\u5faa\u73af\u4e2d\u7684\u4efb\u52a1\u88ab\u5206\u4e3a\u5b8f\u4efb\u52a1\u548c\u5fae\u4efb\u52a1\uff0c\u662f\u4e3a\u4e86\u7ed9\u9ad8\u4f18\u5148\u7ea7\u4efb\u52a1\u4e00\u4e2a\u63d2\u961f\u7684\u673a\u4f1a\uff1a\u5fae\u4efb\u52a1\u6bd4\u5b8f\u4efb\u52a1\u6709\u66f4\u9ad8\u4f18\u5148\u7ea7\u3002\\n\\n\u672c\u6587\u53c2\u8003\u4e86\u5f88\u591a\u535a\u5ba2\u6587\u7ae0\uff0c\u52a0\u4e0a\u81ea\u5df1\u7684\u7406\u89e3\uff0c\u4ec5\u4f5c\u4e8e\u4ea4\u6d41\u5b66\u4e60"},{"id":"catchJsError","metadata":{"permalink":"/blog/catchJsError","editUrl":"https://github.com/jonbenery/weblog/blog/2023-01-31-catchJsError/index.md","source":"@site/blog/2023-01-31-catchJsError/index.md","title":"js\u6536\u96c6\u9519\u8bef\u65e5\u5fd7","description":"js\u6536\u96c6\u9519\u8bef\u65e5\u5fd7\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a","date":"2023-01-31T00:00:00.000Z","formattedDate":"January 31, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"}],"readingTime":0.285,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"catchJsError","title":"js\u6536\u96c6\u9519\u8bef\u65e5\u5fd7","authors":"jonben","tags":["javascript"]},"prevItem":{"title":"\u4e8b\u4ef6\u5faa\u73af-\u5b8f\u4efb\u52a1\u548c\u5fae\u4efb\u52a1","permalink":"/blog/eventLoop"},"nextItem":{"title":"\u6587\u4ef6\u5206\u7247\u548c\u5408\u5e76","permalink":"/blog/fileSlice"}},"content":"js\u6536\u96c6\u9519\u8bef\u65e5\u5fd7\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```js\\n// \u6536\u96c6\u9875\u9762\u9519\u8bef\u65e5\u5fd7\\nwindow.addEventListener(\'error\', evt => {\\n  \\n});\\n// \u6536\u96c6promise\u9519\u8bef\u65e5\u5fd7\\nwindow.addEventListener(\'unhandledrejection\', evt => {\\n  \\n});\\n// \u6536\u96c6Vue\u7684\u9519\u8bef\u65e5\u5fd7\\nVue.config.errorHandler = (err, vm, info) => {\\n  \\n};\\n```"},{"id":"fileSlice","metadata":{"permalink":"/blog/fileSlice","editUrl":"https://github.com/jonbenery/weblog/blog/2023-01-31-fileSlice/index.md","source":"@site/blog/2023-01-31-fileSlice/index.md","title":"\u6587\u4ef6\u5206\u7247\u548c\u5408\u5e76","description":"\u6587\u4ef6\u5206\u7247\u548c\u5408\u5e76\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a","date":"2023-01-31T00:00:00.000Z","formattedDate":"January 31, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"}],"readingTime":0.565,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"fileSlice","title":"\u6587\u4ef6\u5206\u7247\u548c\u5408\u5e76","authors":"jonben","tags":["javascript"]},"prevItem":{"title":"js\u6536\u96c6\u9519\u8bef\u65e5\u5fd7","permalink":"/blog/catchJsError"},"nextItem":{"title":"\u5982\u4f55\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\u7b80\u5316\u5bf9\u8c61","permalink":"/blog/fs"}},"content":"\u6587\u4ef6\u5206\u7247\u548c\u5408\u5e76\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```js\\n const ipt = document.getElementById(\'file\')\\n  // \u786e\u5b9a\u5206\u7247\u7684\u5927\u5c0f\\n  const sliceSize = 128 * 1024;\\n  \\n  ipt.onchange = function() {\\n    const file = ipt.files[0]\\n    const size = file.size;\\n    let start = 0\\n    let arr = [];\\n    let run = true\\n    while(run) {\\n      let sliceBlob = file.slice(start, start + sliceSize)\\n      arr.push(sliceBlob)\\n      start = start + sliceSize\\n      if (start >= size) run = false;\\n    }\\n    // \u5408\u5e76\u5206\u7247\u6570\u636e\u4e3a\u6587\u4ef6\u5e76\u4e0b\u8f7d\u6587\u4ef6\\n    const blob = new Blob(arr.slice, {type: file.type});\\n    const link = document.createElement(\'a\');\\n    link.href = window.URL.createObjectURL(blob);\\n    link.download = true\\n    link.click();\\n    window.URL.revokeObjectURL(link.href);\\n  }\\n```"},{"id":"fs","metadata":{"permalink":"/blog/fs","editUrl":"https://github.com/jonbenery/weblog/blog/2023-01-31-fs/index.mdx","source":"@site/blog/2023-01-31-fs/index.mdx","title":"\u5982\u4f55\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\u7b80\u5316\u5bf9\u8c61","description":"\u72b6\u6001\u6a21\u5f0f\u662f\u4e00\u4e2a\u6709\u8da3\u7684\u6a21\u5f0f\uff0c\u5b83\u53ef\u80fd\u662f\u89e3\u51b3\u4e00\u4e9b\u9700\u6c42\u573a\u666f\u7684\u6700\u4f73\u65b9\u5f0f\u3002\u867d\u7136\u72b6\u6001\u6a21\u5f0f\u4e0d\u662f\u4e00\u79cd\u6613\u4e8e\u5b66\u4e60\u7684\u6a21\u5f0f\uff08\u5b83\u901a\u5e38\u4f1a\u5bfc\u81f4\u4ee3\u7801\u91cf\u589e\u52a0\uff09\uff0c\u4f46\u4e00\u65e6\u60a8\u4e86\u89e3\u4e86\u72b6\u6001\u6a21\u5f0f\u7684\u672c\u8d28\uff0c\u60a8\u5c06\u5728\u672a\u6765\u611f\u8c22\u5b83\u65e0\u4e0e\u4f26\u6bd4\u7684\u597d\u5904\u3002","date":"2023-01-31T00:00:00.000Z","formattedDate":"January 31, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"},{"label":"\u8bbe\u8ba1\u6a21\u5f0f","permalink":"/blog/tags/\u8bbe\u8ba1\u6a21\u5f0f"}],"readingTime":6.555,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"fs","title":"\u5982\u4f55\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\u7b80\u5316\u5bf9\u8c61","authors":"jonben","tags":["javascript","\u8bbe\u8ba1\u6a21\u5f0f"]},"prevItem":{"title":"\u6587\u4ef6\u5206\u7247\u548c\u5408\u5e76","permalink":"/blog/fileSlice"},"nextItem":{"title":"rem","permalink":"/blog/rem"}},"content":"\u72b6\u6001\u6a21\u5f0f\u662f\u4e00\u4e2a\u6709\u8da3\u7684\u6a21\u5f0f\uff0c\u5b83\u53ef\u80fd\u662f\u89e3\u51b3\u4e00\u4e9b\u9700\u6c42\u573a\u666f\u7684\u6700\u4f73\u65b9\u5f0f\u3002\u867d\u7136\u72b6\u6001\u6a21\u5f0f\u4e0d\u662f\u4e00\u79cd\u6613\u4e8e\u5b66\u4e60\u7684\u6a21\u5f0f\uff08\u5b83\u901a\u5e38\u4f1a\u5bfc\u81f4\u4ee3\u7801\u91cf\u589e\u52a0\uff09\uff0c\u4f46\u4e00\u65e6\u60a8\u4e86\u89e3\u4e86\u72b6\u6001\u6a21\u5f0f\u7684\u672c\u8d28\uff0c\u60a8\u5c06\u5728\u672a\u6765\u611f\u8c22\u5b83\u65e0\u4e0e\u4f26\u6bd4\u7684\u597d\u5904\u3002\\n\\n\u7f51\u4e0a\u5f88\u591a\u6587\u7ae0\u5728\u89e3\u91ca\u72b6\u6001\u6a21\u5f0f\u65f6\uff0c\u90fd\u8fc7\u4e8e\u7406\u8bba\u5316\uff0c\u96be\u4ee5\u7406\u89e3\u3002\u8fd9\u91cc\u6211\u5c1d\u8bd5\u7528\u4e00\u4e2a\u5b9e\u9645\u6848\u4f8b\u7528\u901a\u4fd7\u6613\u61c2\u7684\u65b9\u5f0f\u6765\u89e3\u91ca\u3002\\n\\n## 1. \u6253\u5f00/\u5173\u95ed\u706f\\n\\n![image](./img/light.png)\\n\\n\u8ba9\u6211\u4eec\u60f3\u8c61\u4e00\u4e2a\u573a\u666f\uff0c\u5176\u4e2d\u6709\u4e00\u76cf\u706f\u53ea\u6709\u4e00\u4e2a\u5f00\u5173\u3002\\n\\n* \u706f\u4eae\u65f6\u6309\u4e0b\u5f00\u5173\uff0c\u706f\u5c06\u5173\u95ed\u3002\\n\\n* \u518d\u6309\u4e00\u4e0b\u5f00\u5173\uff0c\u706f\u5c31\u4eae\u4e86\u3002\\n\\n\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e2a\u7279\u70b9\uff1a\u540c\u4e00\u4e2a\u5f00\u5173\u6309\u94ae\u5728\u4e0d\u540c\u7684\u72b6\u6001\u4e0b\u4f1a\u6709\u4e0d\u540c\u7684\u884c\u4e3a\u3002\\n\u73b0\u5728\u8ba9\u6211\u4eec\u7f16\u5199\u4e00\u6bb5\u4ee3\u7801\u6765\u6a21\u62df\u706f\u5149\uff0c\u5e76\u6253\u5f00\u548c\u5173\u95ed\u706f\u5149\uff0c\u5982\u4f55\u7f16\u5199\u4ee3\u7801\uff1f\\n\\n\u4e00\u4e2a\u7b80\u5355\u7684\u5b9e\u73b0\uff1a\\n\\n```js\\nclass Light{\\n  constructor() {\\n    this.state = \'off\'\\n  }\\n\\n  clickButton() {\\n    if (this.state === \'off\') {\\n      console.log(\'turn on the light\')\\n      this.state = \'on\'\\n    } else if (this.state === \'on\') {\\n      console.log(\'turn off the light\')\\n      this.state = \'off\'\\n    }\\n  }\\n}\\n```\\n## 2. \u591a\u6001\\n\\n\u5728\u4e0a\u9762\u7684\u573a\u666f\u4e2d\uff0c\u706f\u53ea\u6709\u4e24\u79cd\u72b6\u6001\uff0c\u6240\u4ee5\u4ee3\u7801\u5199\u8d77\u6765\u6bd4\u8f83\u7b80\u5355\u3002\\n\\n\u4f46\u6211\u4eec\u9700\u8981\u77e5\u9053\uff0c\u5728\u73b0\u5b9e\u751f\u6d3b\u4e2d\uff0c\u5f88\u591a\u7269\u4f53\u90fd\u6709\u4e24\u79cd\u4ee5\u4e0a\u7684\u72b6\u6001\uff0c\u4e00\u65e6\u4e00\u4e2a\u5bf9\u8c61\u6709\u66f4\u591a\u7684\u72b6\u6001\uff0c\u5b83\u5c31\u4f1a\u66f4\u9ebb\u70e6\u3002\\n\\n\u4f8b\u5982\uff0c\u6709\u4e9b\u624b\u7535\u7b52\u5177\u6709\u4e09\u79cd\u72b6\u6001\uff1a\\n\\n* \u5173\u95ed\u72b6\u6001\\n\\n* \u5f31\u5149\u72b6\u6001\\n\\n* \u5f3a\u5149\u72b6\u6001\\n\\n\u7b2c\u4e00\u6b21\u6309\u4e0b\u5f00\u5173\u6253\u5f00\u5f31\u5149\uff0c\u7b2c\u4e8c\u6b21\u6309\u4e0b\u6253\u5f00\u5f3a\u5149\uff0c\u7b2c\u4e09\u6b21\u6309\u4e0b\u5173\u95ed\u706f\u3002\\n\\n![image](./img/light-1.png)\\n\\n\u73b0\u5728\u8ba9\u6211\u4eec\u6a21\u62df\u8fd9\u6837\u7684\u884c\u4e3a\uff0c\u6211\u4eec\u5e94\u8be5\u5982\u4f55\u5199\u4ee3\u7801\uff1f\\n\\n\u6b63\u5e38\u7684\u89e3\u51b3\u65b9\u6848\u662f\u6269\u5c55\u524d\u9762\u7684\u4ee3\u7801\uff0c\u5728clickButton\u65b9\u6cd5\u4e2d\u8fdb\u884c\u4e00\u4e9b\u989d\u5916\u7684\u72b6\u6001\u5224\u65ad\u548c\u72b6\u6001\u5207\u6362\u3002\\n\\n```js\\nclass Light{\\n  constructor() {\\n    this.state = \'off\'\\n  }\\n\\n  clickButton() {\\n    if (this.state === \'off\') {\\n      console.log(\'turn on the low light\')\\n      this.state = \'lowLight\'\\n    } else if (this.state === \'lowLight\') {\\n      console.log(\'switch to the strong light\')\\n      this.state = \'strongLight\'\\n    } else if (this.state === \'strongLight\') {\\n      console.log(\'turn off the light\')\\n      this.state = \'off\'\\n    }\\n  }\\n}\\n```\\n\\n\u867d\u7136\u8fd9\u6837\u7684\u4ee3\u7801\u53ef\u4ee5\u6ee1\u8db3\u8981\u6c42\uff0c\u4f46\u5b83\u6709\u5f88\u591a\u7f3a\u70b9\u3002\\n\\n* \u5982\u679c\u4ee5\u540e\u9700\u8981\u6dfb\u52a0\u6216\u8005\u4fee\u6539Light\u7684\u72b6\u6001\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u4e0d\u65ad\u7684\u4fee\u6539clickButton\u65b9\u6cd5\uff0c\u4f7f\u5f97clickButton\u4e0d\u7a33\u5b9a\uff0c\u4e0d\u7b26\u5408\u5f00\u95ed\u539f\u5219\u3002\\n\\n* \u540c\u65f6\uff0c\u6240\u6709\u4e0e\u72b6\u6001\u76f8\u5173\u7684\u884c\u4e3a\u90fd\u653e\u5728\u4e86clickButton\u65b9\u6cd5\u4e2d\uff0c\u4e0d\u7b26\u5408\u5355\u4e00\u804c\u8d23\u539f\u5219\u3002\u5982\u679c\u4ee5\u540e\u52a0\u5165\u65b0\u7684\u72b6\u6001\uff0c\u6bd4\u5982superStrongLight\uff0cclickButton\u65b9\u6cd5\u4f1a\u8d8a\u6765\u8d8a\u81c3\u80bf\u3002\\n\\n* \u6700\u540e\uff0c\u72b6\u6001\u4e4b\u95f4\u7684\u5207\u6362\u5b8c\u5168\u4f9d\u8d56\u4e8e\u5728 clickButton \u65b9\u6cd5\u4e2d\u5806\u53e0 if \u548c else \u8bed\u53e5\u3002\u6dfb\u52a0\u6216\u4fee\u6539\u72b6\u6001\u53ef\u80fd\u9700\u8981\u66f4\u6539\u591a\u4e2a\u64cd\u4f5c\uff0c\u8fd9\u4f7f\u5f97\u8be5\u65b9\u6cd5\u66f4\u96be\u4ee5\u9605\u8bfb\u548c\u7ef4\u62a4\u3002\\n\\n## 4. \u5206\u6790\\n\\n\u8ba9\u6211\u4eec\u56de\u60f3\u4e00\u4e0b\uff0c\u6211\u4eec\u7684\u4ee3\u7801\u4f7f\u7528 Light \u4f5c\u4e3a\u4e00\u4e2a\u5355\u72ec\u7684\u5bf9\u8c61\uff0c\u7136\u540e\u5b83\u5177\u6709\u4e09\u79cd\u72b6\u6001\u3002\u7136\u540e\u6211\u4eec\u9700\u8981\u8ba9\u5b83\u5728\u4e0d\u540c\u7684\u72b6\u6001\u4e4b\u95f4\u5207\u6362\uff0c\u6211\u4eec\u5c06\u4e0d\u540c\u7684\u72b6\u6001\u89c6\u4e3a\u5149\u7684\u5185\u90e8\u5c5e\u6027\u3002\\n\\n\u4f46\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u6253\u7834\u60ef\u6027\u601d\u7ef4\uff0c\u5c06\u6bcf\u4e00\u4e2a\u72b6\u6001\u90fd\u89c6\u4e3a\u4e00\u4e2a\u72ec\u7acb\u7684\u5b58\u5728\uff0c\u5c01\u88c5\u6210\u4e00\u4e2a\u5355\u72ec\u7684\u7c7b\u3002\\n\\n\u6bd4\u5982\u8fd9\u91cc\u7684\u706f\u6709\u4e09\u79cd\u72b6\u6001\uff1a\\n\\n* \u4f4e\u5149\u72b6\u6001\\n\\n* \u5f3a\u5149\u72b6\u6001\\n\\n* \u5173\u95ed\u72b6\u6001\\n\\n\u4e0d\u540c\u72b6\u6001\u7684\u706f\u6709\u81ea\u5df1\u7684\u884c\u4e3a\u7279\u5f81\u3002\\n\\nLowLightState \u7684clickButton \u65b9\u6cd5\u5c06\u72b6\u6001\u5207\u6362\u4e3aStrongLightState\uff0cStrongLightState \u7684clickButton \u5c06\u72b6\u6001\u5207\u6362\u4e3aOffState\u3002\\n\\n![image](./img/light-3.png)\\n\\n\u800c\u6211\u4eec\u7684Light\u53ea\u9700\u8981\u5173\u6ce8\u5b83\u5904\u4e8e\u4ec0\u4e48\u72b6\u6001\uff0c\u4e0d\u9700\u8981\u5904\u7406\u72b6\u6001\u5207\u6362\uff0c\u72b6\u6001\u5207\u6362\u7531\u6bcf\u4e2a\u72b6\u6001\u81ea\u5df1\u5904\u7406\u3002\\n\\n\u4e00\u4e0b\u662f\u5b8c\u6574\u4ee3\u7801\\n\\n```js\\n class OffLightState {\\n    constructor(light) {\\n      this.light = light\\n    }\\n\\n    clickButton() {\\n      console.log(\'Turn on the low light\')\\n      this.light.setState(this.light.lowLightState)\\n    }\\n  }\\n\\n  class LowLightState {\\n    constructor(light) {\\n      this.light = light\\n    }\\n\\n    clickButton() {\\n      console.log(\'Switch to the strong light\')\\n      this.light.setState(this.light.strongLightState)\\n    }\\n  }\\n\\n  class StrongLightState {\\n    constructor(light) {\\n      this.light = light\\n    }\\n\\n    clickButton() {\\n      console.log(\'turn off the light\')\\n      this.light.setState(this.light.offLightState)\\n    }\\n  }\\n  class Light{\\n    constructor() {\\n      this.offLightState = new OffLightState(this);\\n      this.lowLightState = new LowLightState(this);\\n      this.strongLightState = new StrongLightState(this);\\n      this.currentState = this.offLightState\\n    }\\n\\n    setState(newState) {\\n      this.currentState = newState\\n    }\\n\\n    clickButton() {\\n      this.currentState.clickButton()\\n    }\\n  }\\n\\n  let light = new Light()\\n  light.clickButton()\\n  light.clickButton()\\n  light.clickButton()\\n```\\n\u56fe\u89e3:\\n\\n![image](./img/light-4.png)\\n\\n\u8fd9\u6837\u7684\u4ee3\u7801\u53ef\u4ee5\u89e3\u51b3\u524d\u9762\u63d0\u5230\u7684\u95ee\u9898\uff1a\\n\u8f7b\u7269\u4f53\u66f4\u7b80\u5355\u3002\u5b83\u53ea\u9700\u8981\u8c03\u7528this.currentState.clickButton()\uff0c\u72b6\u6001\u5207\u6362\u53ef\u4ee5\u7531\u72b6\u6001\u5bf9\u8c61\u81ea\u5df1\u5904\u7406\u3002\\n\\n\u5982\u679c\u5c06\u6765\u6709\u65b0\u7684\u72b6\u6001\uff0c\u6211\u4eec\u53ea\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u72b6\u6001\u7c7b\uff0c\u7136\u540e\u4fee\u6539\u5176\u76f8\u90bb\u7684\u72b6\u6001\u7c7b\uff0c\u800c\u4e0d\u9700\u8981\u5bf9\u73b0\u6709\u4ee3\u7801\u8fdb\u884c\u5927\u91cf\u4fee\u6539\u3002\\n\\n![image](./img/light-5.png)\\n\\n\u8fd9\u79cd\u7f16\u5199\u4ee3\u7801\u7684\u6280\u672f\u5c31\u662f\u72b6\u6001\u6a21\u5f0f\u3002\\n\\n## 5.\u72b6\u6001\u6a21\u5f0f\u7684\u6b63\u5f0f\u5b9a\u4e49\uff1a\\n\\n\u72b6\u6001\u6a21\u5f0f\u662f\u4e00\u79cd\u884c\u4e3a\u8f6f\u4ef6\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u5b83\u5141\u8bb8\u5bf9\u8c61\u5728\u5176\u5185\u90e8\u72b6\u6001\u53d1\u751f\u53d8\u5316\u65f6\u6539\u53d8\u5176\u884c\u4e3a\u3002\u8fd9\u79cd\u6a21\u5f0f\u63a5\u8fd1\u4e8e\u6709\u9650\u72b6\u6001\u673a\u7684\u6982\u5ff5\u3002\u72b6\u6001\u6a21\u5f0f\u53ef\u4ee5\u89e3\u91ca\u4e3a\u7b56\u7565\u6a21\u5f0f\uff0c\u5b83\u80fd\u591f\u901a\u8fc7\u8c03\u7528\u6a21\u5f0f\u63a5\u53e3\u4e2d\u5b9a\u4e49\u7684\u65b9\u6cd5\u6765\u5207\u6362\u7b56\u7565\u3002\\n\\n\u7b80\u5355\u6765\u8bf4\uff0c\u5982\u679c\u4f60\u7684\u5bf9\u8c61\u6709\u591a\u4e2a\u72b6\u6001\uff0c\u5e76\u4e14\u4e0d\u540c\u72b6\u6001\u7684\u5bf9\u8c61\u8868\u73b0\u4e0d\u540c\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\u3002\\n\\n\u72b6\u6001\u6a21\u5f0f\u6709\u65f6\u4f1a\u589e\u52a0\u4ee3\u7801\u884c\u6570\uff0c\u4f46\u4ee3\u7801\u7684\u8d28\u91cf\u5e76\u4e0d\u53d6\u51b3\u4e8e\u4ee3\u7801\u884c\u6570\u3002\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\u901a\u5e38\u53ef\u4ee5\u4f7f\u60a8\u7684\u5bf9\u8c61\u7684\u903b\u8f91\u66f4\u52a0\u7b80\u6d01\u3002"},{"id":"rem","metadata":{"permalink":"/blog/rem","editUrl":"https://github.com/jonbenery/weblog/blog/2023-01-31-rem/index.md","source":"@site/blog/2023-01-31-rem/index.md","title":"rem","description":"1. rem","date":"2023-01-31T00:00:00.000Z","formattedDate":"January 31, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"}],"readingTime":1.98,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"rem","title":"rem","authors":"jonben","tags":["javascript"]},"prevItem":{"title":"\u5982\u4f55\u4f7f\u7528\u72b6\u6001\u6a21\u5f0f\u7b80\u5316\u5bf9\u8c61","permalink":"/blog/fs"},"nextItem":{"title":"\u4e2d\u6587\u6392\u5e8f","permalink":"/blog/sortZh"}},"content":"## 1. rem\\n\\n`rem`\u662f\u76f8\u5bf9\u4e8e\u6839\u5143\u7d20`html`\u7684`font-size`\uff0c\u8fd9\u6837\u5c31\u610f\u5473\u7740\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728\u6839\u5143\u7d20\u7684`font-size`\u786e\u5b9a\u4e00\u4e2a\u53c2\u8003\u503c\uff0c\u8fd9\u4e2a\u53c2\u8003\u503c\u8bbe\u7f6e\u4e3a\u591a\u5c11\uff0c\u5b8c\u5168\u53ef\u4ee5\u6839\u636e\u60a8\u81ea\u5df1\u7684\u9700\u6c42\u6765\u5b9a\u3002\\n\\n## 2.rem\u6362\u7b97\\n\\n\u5047\u5982\uff1a\u6211\u4eec\u8bbe\u8ba1\u7a3f\u5bbd\u5ea6\u662f`750px`\uff0c\u73b0\u5728\u6211\u4eec\u5e0c\u671b\u5f53`1rem`\u4ee3\u8868`100px`\u7684\u65f6\u5019\uff0c \u5373`7.5rem`\u4ee3\u8868`750px`\uff0c\u6211\u4eec\u5c31\u9700\u8981\u8bbe\u7f6e\u6839\u5143\u7d20\u7684`font-size`\u4e3a`100px`\uff0c\u5373\uff1a\\n\\n```powersheel\\n7.5rem * 100 = 750px //100\u7eaf\u7cb9\u662f\u4e3a\u4e86\u597d\u8ba1\u7b97\\n```\\n\\n\u8fd9\u65f6\u5019\u5047\u8bbe\u5c4f\u5e55\u5bbd\u5ea6\u662f`750px`,\u6211\u4eec\u8ba9\u6839\u5143\u7d20\u7684`font-size`\u4e3a`100px`\uff0c\u5219\u4e0b\u9762\u7b49\u5f0f\u6210\u7acb\\n```powersheel\\n=> 7.5rem * fontSize = \u5c4f\u5e55\u5bbd\u5ea6\uff08750px\uff09\\n=> fontSize = \u5c4f\u5e55\u5bbd\u5ea6\uff08750px\uff09/ 7.5rem = 100px;\\n=> fontSize = \u5c4f\u5e55\u5bbd\u5ea6/(\u8bbe\u8ba1\u7a3f\u5bbd\u5ea6\uff08750\uff09/ 100) = \u5c4f\u5e55\u5bbd\u5ea6/\u8bbe\u8ba1\u7a3f\u5bbd\u5ea6\uff08750\uff09* 100\\n```\\n\\n\u6240\u4ee5\u5f53\u6211\u4eec\u5c4f\u5e55\u5bbd\u5ea6\u662f`750px`\u7684\u65f6\u5019\uff0c\u5176\u6839\u5143\u7d20\u7684`font-size`\u4e3a`100px`\\n\\n\u5f53\u5c4f\u5e55\u5bbd\u5ea6\u53d8\u5316\u4e3a`1200px`\u7684\u65f6\u5019\uff0c\u5176\u6839\u5143\u7d20\u7684`font-size`\u4e3a`160px`\\n\\n\u8fd9\u5c31\u5b9e\u73b0\u4e86\u5f53\u5c4f\u5e55\u5bbd\u5ea6\u53d8\u5316\u7684\u60c5\u51b5\u4e0b\uff0c\u8ba9\u6211\u4eec\u7684\u5e03\u5c40\u6765\u81ea\u52a8\u9002\u5e94\u5c4f\u5e55\u7684\u5927\u5c0f\\n\\n## 3.\u5f97\u5230\u4e00\u4e0b\u8ba1\u7b97\u6839\u5143\u7d20`font-size`\u7684\u51fd\u6570\uff0c \u4ee3\u7801\u5982\u4e0b\uff1a\\n```js\\nwindow.onload = function(){\\n    /*720\u4ee3\u8868\u8bbe\u8ba1\u5e08\u7ed9\u7684\u8bbe\u8ba1\u7a3f\u7684\u5bbd\u5ea6\uff0c\u4f60\u7684\u8bbe\u8ba1\u7a3f\u662f\u591a\u5c11\uff0c\u5c31\u5199\u591a\u5c11;100\u4ee3\u8868\u6362\u7b97\u6bd4\u4f8b\uff0c\u8fd9\u91cc\u5199100\u662f\\n      \u4e3a\u4e86\u4ee5\u540e\u597d\u7b97,\u6bd4\u5982\uff0c\u4f60\u6d4b\u91cf\u7684\u4e00\u4e2a\u5bbd\u5ea6\u662f100px,\u5c31\u53ef\u4ee5\u5199\u4e3a1rem,\u4ee5\u53ca1px=0.01rem\u7b49\u7b49*/\\n    getRem(720,100)\\n};\\nwindow.onresize = function(){\\n    getRem(720,100)\\n};\\nfunction getRem(pwidth,prem){\\n    var html = document.getElementsByTagName(\\"html\\")[0];\\n    var oWidth = document.body.clientWidth || document.documentElement.clientWidth;\\n    html.style.fontSize = oWidth/pwidth*prem + \\"px\\";\\n    //html.style.fontSize = oWidth/(pwidth/prem) + \\"px\\";\\n}\\n```"},{"id":"sortZh","metadata":{"permalink":"/blog/sortZh","editUrl":"https://github.com/jonbenery/weblog/blog/2023-01-31-sortZh/index.md","source":"@site/blog/2023-01-31-sortZh/index.md","title":"\u4e2d\u6587\u6392\u5e8f","description":"\u9488\u5bf9\u4e2d\u6587\u7684\u6392\u5e8f\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a","date":"2023-01-31T00:00:00.000Z","formattedDate":"January 31, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"}],"readingTime":0.155,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"sortZh","title":"\u4e2d\u6587\u6392\u5e8f","authors":"jonben","tags":["javascript"]},"prevItem":{"title":"rem","permalink":"/blog/rem"},"nextItem":{"title":"\u9875\u9762\u79bb\u5f00\u65f6\u963b\u6b62\u9875\u9762\u5237\u65b0","permalink":"/blog/beforeunload"}},"content":"\u9488\u5bf9\u4e2d\u6587\u7684\u6392\u5e8f\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```js\\nexport function localeCompare(arr, key) {\\n  return arr.sort((a, b) => {\\n    return new Intl.Collator(\'zh-Hans-CN\', {numeric: true}).compare(a[key], b[key]);\\n  });\\n}\\n```"},{"id":"beforeunload","metadata":{"permalink":"/blog/beforeunload","editUrl":"https://github.com/jonbenery/weblog/blog/2023-01-30-beforeunload/index.md","source":"@site/blog/2023-01-30-beforeunload/index.md","title":"\u9875\u9762\u79bb\u5f00\u65f6\u963b\u6b62\u9875\u9762\u5237\u65b0","description":"js \u9875\u9762\u79bb\u5f00\u540e\u7684\u63d0\u793a\uff08\u6d4f\u89c8\u5668\u63d0\u793a\u7cfb\u7edf\u53ef\u80fd\u4e0d\u4f1a\u4fdd\u5b58\u60a8\u6240\u505a\u7684\u66f4\u6539\uff09","date":"2023-01-30T00:00:00.000Z","formattedDate":"January 30, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"}],"readingTime":0.285,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"beforeunload","title":"\u9875\u9762\u79bb\u5f00\u65f6\u963b\u6b62\u9875\u9762\u5237\u65b0","authors":"jonben","tags":["javascript"]},"prevItem":{"title":"\u4e2d\u6587\u6392\u5e8f","permalink":"/blog/sortZh"},"nextItem":{"title":"\u6839\u636e\u65f6\u95f4\u6233\u8ba1\u7b97\u51fa\u5177\u4f53\u65f6\u95f4","permalink":"/blog/computedTime"}},"content":"js \u9875\u9762\u79bb\u5f00\u540e\u7684\u63d0\u793a\uff08\u6d4f\u89c8\u5668\u63d0\u793a\u7cfb\u7edf\u53ef\u80fd\u4e0d\u4f1a\u4fdd\u5b58\u60a8\u6240\u505a\u7684\u66f4\u6539\uff09\\n\\n\u963b\u6b62\u9875\u9762\u52a0\u8f7d\u7684\u4ee3\u7801\u5982\u4e0b\uff1a\\n```js\\nwindow.onbeforeunload = function(e) {\\n  var dialogText = \'Dialog text here\';\\n  e.returnValue = dialogText;\\n  return dialogText;\\n};\\n```"},{"id":"computedTime","metadata":{"permalink":"/blog/computedTime","editUrl":"https://github.com/jonbenery/weblog/blog/2023-01-30-computedTime/index.md","source":"@site/blog/2023-01-30-computedTime/index.md","title":"\u6839\u636e\u65f6\u95f4\u6233\u8ba1\u7b97\u51fa\u5177\u4f53\u65f6\u95f4","description":"\u6839\u636e\u7ed9\u5b9a\u7684\u65f6\u95f4\u6233\u8ba1\u7b97\u51fa\u5177\u4f53\u65f6\u95f4\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a","date":"2023-01-30T00:00:00.000Z","formattedDate":"January 30, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"}],"readingTime":0.89,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"computedTime","title":"\u6839\u636e\u65f6\u95f4\u6233\u8ba1\u7b97\u51fa\u5177\u4f53\u65f6\u95f4","authors":"jonben","tags":["javascript"]},"prevItem":{"title":"\u9875\u9762\u79bb\u5f00\u65f6\u963b\u6b62\u9875\u9762\u5237\u65b0","permalink":"/blog/beforeunload"},"nextItem":{"title":"\u7528css\u65b0\u7279\u6027\u4f18\u5316\u957f\u5217\u8868","permalink":"/blog/contentVisibility"}},"content":"\u6839\u636e\u7ed9\u5b9a\u7684\u65f6\u95f4\u6233\u8ba1\u7b97\u51fa\u5177\u4f53\u65f6\u95f4\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n### \u7b2c\u4e00\u79cd\u8ba1\u7b97\u65b9\u6cd5\\n\\n```js\\nfunction computedTime(time) {\\n  // \u83b7\u53d6\u8f93\u5165\u65f6\u95f4\u4e0e\u4eca\u5929\u65f6\u95f4\u6233\u7684\u5dee\u503c\\n  const duration = new Date().getTime() - time\\n  // \u5929\\n  const d = Math.floor(duration / (24 * 60 * 60 * 1000));\\n  // \u5c0f\u65f6\\n  const h = Math.floor((duration % (24 * 60 * 60 * 1000)) / 3600000);\\n  // \u5206\u949f\\n  const m = Math.floor((duration % (60 * 60 * 1000)) / 60000);\\n  // \u79d2\\n  const s = Math.floor(duration % (60 * 1000) / 1000);\\n\\n  return {\\n    d,\\n    h,\\n    m,\\n    s\\n  }\\n}\\n```\\n\\n### \u7b2c\u4e8c\u79cd\u8ba1\u7b97\u65b9\u6cd5\\n```js\\nfunction computedTime (time) {\\n  const d = Math.floor(time / (24 * 60 * 60 * 1000));\\n  const h = Math.floor(time / 3600000) % 24\\n  const m = Math.floor(time / 60000) % 60\\n  const s = Math.floor(time / 1000) % 60\\n  return {\\n    d,\\n    h,\\n    m,\\n    s\\n  }\\n}\\n```"},{"id":"contentVisibility","metadata":{"permalink":"/blog/contentVisibility","editUrl":"https://github.com/jonbenery/weblog/blog/2023-01-30-contentVisibility/index.mdx","source":"@site/blog/2023-01-30-contentVisibility/index.mdx","title":"\u7528css\u65b0\u7279\u6027\u4f18\u5316\u957f\u5217\u8868","description":"\u5e9f\u8bdd\u4e0d\u591a\u8bf4\uff0c\u8be5\u5c5e\u6027\u4e3a content-visibility","date":"2023-01-30T00:00:00.000Z","formattedDate":"January 30, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"}],"readingTime":9.475,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"contentVisibility","title":"\u7528css\u65b0\u7279\u6027\u4f18\u5316\u957f\u5217\u8868","authors":"jonben","tags":["javascript"]},"prevItem":{"title":"\u6839\u636e\u65f6\u95f4\u6233\u8ba1\u7b97\u51fa\u5177\u4f53\u65f6\u95f4","permalink":"/blog/computedTime"},"nextItem":{"title":"\u62d6\u62fd\u83b7\u53d6\u6587\u4ef6\u5939\u4e0b\u7684\u6240\u6709\u6587\u4ef6","permalink":"/blog/dragDir"}},"content":"\u5e9f\u8bdd\u4e0d\u591a\u8bf4\uff0c\u8be5\u5c5e\u6027\u4e3a `content-visibility`\\n\\n## 1. \u4f55\u4e3a content-visibility\uff1f\\n\\n`content-visibility` \uff1a\u5c5e\u6027\u63a7\u5236\u4e00\u4e2a\u5143\u7d20\u662f\u5426\u6e32\u67d3\u5176\u5185\u5bb9\uff0c\u5b83\u5141\u8bb8\u7528\u6237\u4ee3\u7406\uff08\u6d4f\u89c8\u5668\uff09\u6f5c\u5728\u5730\u7701\u7565\u5927\u91cf\u5e03\u5c40\u548c\u6e32\u67d3\u5de5\u4f5c\uff0c\u76f4\u5230\u9700\u8981\u5b83\u4e3a\u6b62\u3002\\n:::info MDN \u539f\u6587\\nThe content-visibility CSS property controls whether or not an element renders its contents at all, along with forcing a strong set of containments, allowing user agents to potentially omit large swathes of layout and rendering work until it becomes needed. Basically it enables the user agent to skip an element\'s rendering work (including layout and painting) until it is needed \u2014 which makes the initial page load much faster.\\n:::\\n\\n\u5b83\u6709\u51e0\u4e2a\u5e38\u89c1\u7684\u53d6\u503c\u3002\\n```CSS\\ncontent-visibility: visible;\\ncontent-visibility: hidden;\\ncontent-visibility: auto;\\n```\\n\\n\u5206\u522b\u89e3\u91ca\u4e00\u4e0b\uff1a\\n* `content-visibility: visible` \uff1a\u9ed8\u8ba4\u503c\uff0c\u6ca1\u6709\u4efb\u4f55\u6548\u679c\uff0c\u76f8\u5f53\u4e8e\u6ca1\u6709\u6dfb\u52a0 `content-visibility`\uff0c\u5143\u7d20\u7684\u6e32\u67d3\u4e0e\u5f80\u5e38\u4e00\u81f4\u3002\\n* `content-visibility: hidden` \uff1a\u4e0e `display: none` \u7c7b\u4f3c\uff0c\u7528\u6237\u4ee3\u7406\u5c06\u8df3\u8fc7\u5176\u5185\u5bb9\u7684\u6e32\u67d3\u3002\uff08\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8df3\u8fc7\u7684\u662f\u5185\u5bb9\u7684\u6e32\u67d3\uff09\\n* `content-visibility: auto` \uff1a\u5982\u679c\u8be5\u5143\u7d20\u4e0d\u5728\u5c4f\u5e55\u4e0a\uff0c\u5e76\u4e14\u4e0e\u7528\u6237\u65e0\u5173\uff0c\u5219\u4e0d\u4f1a\u6e32\u67d3\u5176\u540e\u4ee3\u5143\u7d20\u3002\\n\\n## 2. contain-intrinsic-size\\n\\n\u5f53\u7136\uff0c\u9664 `content-visibility` \u4e4b\u5916\uff0c\u8fd8\u6709\u4e00\u4e2a\u4e0e\u4e4b\u914d\u5957\u7684\u5c5e\u6027 `contain-intrinsic-size`\u3002\\n\\n`contain-intrinsic-size` \uff1a\u63a7\u5236\u7531 `content-visibility` \u6307\u5b9a\u7684\u5143\u7d20\u7684\u81ea\u7136\u5927\u5c0f\u3002\\n\\n## 3. \u5229\u7528 content-visibility: hidden \u4f18\u5316\u5c55\u793a\u5207\u6362\u6027\u80fd\\n\\n\u9996\u5148\uff0c\u5047\u8bbe\u6211\u4eec\u6709\u4e24\u4e2a DIV \u5305\u88f9\u6846\uff1a\\n\\n```html\\n<div class=\\"g-wrap\\">\\n  <div>1111</div>\\n  <div class=\\"hidden\\">2222</div>\\n</div>\\n```\\n\u8bbe\u7f6e\u4e24\u4e2a div \u4e3a 200x200 \u7684\u9ed1\u8272\u5757\uff1a\\n```CSS\\n.g-wrap > div {\\n  width: 60px;\\n  height: 60px;\\n  background: #000;\\n}\\n```\\n\\nimport { RenderHtml } from \'./index.js\'\\n\\n\u6548\u679c\u5982\u4e0b\uff1a\\n\\n<RenderHtml/>\\n\\nOK\uff0c\u6ca1\u6709\u95ee\u9898\uff0c\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u7ed9\u5176\u4e2d\u7684 `.hidden` \u8bbe\u7f6e `content-visibility: hidden`\uff0c\u770b\u770b\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1a\\n```CSS\\n.hidden {\\n  content-visibility: hidden;\\n}\\n```\\n\u6548\u679c\u5982\u4e0b\uff1a\\n\\n<RenderHtml hidden=\\"hidden\\"/>\\n\\n\u6ce8\u610f\uff0c\u4ed4\u7ec6\u770b\u6548\u679c\uff0c\u8fd9\u91cc\u6dfb\u52a0\u4e86 `content-visibility: hidden` \u4e4b\u540e\uff0c**\u6d88\u5931\u7684\u53ea\u662f\u6dfb\u52a0\u4e86\u8be5\u5143\u7d20\u7684 `div` \u7684\u5b50\u5143\u7d20\u6d88\u5931\u4e0d\u89c1\uff0c\u800c\u7236\u5143\u7d20\u672c\u8eab\u53ca\u5176\u6837\u5f0f\uff0c\u8fd8\u662f\u5b58\u5728\u9875\u9762\u4e0a\u7684\u3002**\\n\\n\u5982\u679c\u6211\u4eec\u53bb\u6389\u8bbe\u7f6e\u4e86 `content-visibility: hidden` \u7684\u5143\u7d20\u672c\u8eab\u7684 `width`\u3001`height`\u3001`padding`\u3001`margin` \u7b49\u5c5e\u6027\uff0c\u5219\u5143\u7d20\u770b\u4e0a\u53bb\u5c31\u5982\u540c\u8bbe\u7f6e\u4e86 `display: none` \u4e00\u822c\uff0c\u5728\u9875\u9762\u4e0a\u6d88\u5931\u4e0d\u89c1\u4e86\u3002\\n\\n\u90a3\u4e48\uff0c`content-visibility: hidden` \u7684\u4f5c\u7528\u662f\u4ec0\u4e48\u5462\uff1f\\n\\n\u8bbe\u7f6e\u4e86 `content-visibility: hidden` \u7684\u5143\u7d20\uff0c**\u5176\u5143\u7d20\u7684\u5b50\u5143\u7d20\u5c06\u88ab\u9690\u85cf\uff0c\u4f46\u662f\uff0c\u5b83\u7684\u6e32\u67d3\u72b6\u6001\u5c06\u4f1a\u88ab\u7f13\u5b58**\u3002\u6240\u4ee5\uff0c\u5f53 `content-visibility: hidden` \u88ab\u79fb\u9664\u65f6\uff0c\u7528\u6237\u4ee3\u7406\u65e0\u9700\u91cd\u5934\u5f00\u59cb\u6e32\u67d3\u5b83\u548c\u5b83\u7684\u5b50\u5143\u7d20\u3002\\n\\n\u56e0\u6b64\uff0c\u5982\u679c\u6211\u4eec\u5c06\u8fd9\u4e2a\u5c5e\u6027\u5e94\u7528\u5728\u4e00\u4e9b\u4e00\u5f00\u59cb\u9700\u8981\u88ab\u9690\u85cf\uff0c\u4f46\u662f\u5176\u540e\u5728\u9875\u9762\u7684\u67d0\u4e00\u65f6\u523b\u9700\u8981\u88ab\u6e32\u67d3\uff0c\u6216\u8005\u662f\u4e00\u4e9b\u9700\u8981\u88ab\u9891\u7e41\u5207\u6362\u663e\u793a\u3001\u9690\u85cf\u72b6\u6001\u7684\u5143\u7d20\u4e0a\uff0c\u5176\u6e32\u67d3\u6548\u7387\u5c06\u4f1a\u6709\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u63d0\u5347\u3002\\n\\n## 4. \u5229\u7528 content-visibility: auto \u5b9e\u73b0\u61d2\u52a0\u8f7d\u6216\u865a\u62df\u5217\u8868\\n\\nOK\uff0c\u63a5\u4e0b\u6765\u662f `content-visibility` \u7684\u6838\u5fc3\u7528\u6cd5\uff0c\u5229\u7528 `auto` \u5c5e\u6027\u503c\u3002\\n\\n`content-visibility: auto` \u7684\u4f5c\u7528\u662f\uff0c\u5982\u679c\u8be5\u5143\u7d20\u4e0d\u5728\u5c4f\u5e55\u4e0a\uff0c\u5e76\u4e14\u4e0e\u7528\u6237\u65e0\u5173\uff0c\u5219\u4e0d\u4f1a\u6e32\u67d3\u5176\u540e\u4ee3\u5143\u7d20\u3002\u662f\u4e0d\u662f\u4e0e `LazyLoad` \u975e\u5e38\u7c7b\u4f3c\u3002\\n\\n\u6211\u4eec\u6765\u770b\u8fd9\u6837\u4e00\u4e2a DEMO \uff0c\u4e86\u89e3\u5176\u4f5c\u7528\uff1a\\n\\n\u5047\u8bbe\uff0c\u6211\u4eec\u5b58\u5728\u8fd9\u6837\u4e00\u4e2a HTML \u7ed3\u6784\uff0c\u542b\u6709\u5927\u91cf\u7684\u6587\u672c\u5185\u5bb9\uff1a\\n\\n```HTML\\n<div class=\\"g-wrap\\">\\n    <div class=\\"paragraph\\">...</div>\\n    // ... \u5305\u542b\u4e86 N \u4e2a paragraph\\n    <div class=\\"paragraph\\">...</div>\\n</div>\\n```\\n\u6bcf\u4e2a `.paragraph` \u7684\u5185\u5bb9\u5982\u4e0b\\n```HTML\\nLorem Start!\\nLorem ipsum dolor sit amet consectetur adipisicing elit.Nonvitae voluptates maxime solutaimpedit doloremque atque quasi dignissimosdelectus distinctio aut commodieaque nostrum maiores nulla! Ipsum voluptatibus alias suscipit!\\nLorem ipsum dolor sit amet consectetur adipisicingelit.Non vitae voluptates maxime solutaimpedit doloremque atque quasi dignissimos,delectus distinctio aut commodi eaque nostrum maiores nulla! Ipsum voluptatibus alias suscipit!\\nLorem End!\\n```\\n\\n\u56e0\u6b64\uff0c\u6574\u4e2a\u7684\u9875\u9762\u770b\u8d77\u6765\u5c31\u662f\u8fd9\u6837\u7684\uff1a\\n\\n\\n![image](./img/content.visibility.1.gif)\\n\\n\u7531\u4e8e\uff0c\u6211\u4eec\u6ca1\u6709\u5bf9\u9875\u9762\u5185\u5bb9\u8fdb\u884c\u4efb\u4f55\u5904\u7406\uff0c\u56e0\u6b64\uff0c\u6240\u6709\u7684 `.paragraph` \u5728\u9875\u9762\u5237\u65b0\u7684\u4e00\u77ac\u95f4\uff0c\u90fd\u4f1a\u8fdb\u884c\u6e32\u67d3\uff0c\u770b\u5230\u7684\u6548\u679c\u5c31\u5982\u4e0a\u6240\u793a\u3002\\n\\n\u5f53\u7136\uff0c\u73b0\u4ee3\u6d4f\u89c8\u5668\u6108\u52a0\u8d8b\u4e8e\u667a\u80fd\uff0c\u57fa\u4e8e\u8fd9\u79cd\u573a\u666f\uff0c\u5176\u5b9e\u6211\u4eec\u975e\u5e38\u5e0c\u671b\u5bf9\u4e8e\u4ecd\u672a\u770b\u5230\uff0c\u4ecd\u65e7\u672a\u6eda\u52a8\u5230\u7684\u533a\u57df\uff0c\u53ef\u4ee5\u5ef6\u8fdf\u52a0\u8f7d\uff0c\u53ea\u6709\u5230\u6211\u4eec\u9700\u8981\u5c55\u793a\u3001\u6eda\u52a8\u5230\u8be5\u5904\u65f6\uff0c\u9875\u9762\u5185\u5bb9\u624d\u8fdb\u884c\u6e32\u67d3\u3002\\n\\n\u57fa\u4e8e\u8fd9\u79cd\u573a\u666f\uff0c`content-visibility: auto` \u5c31\u5e94\u8fd0\u800c\u751f\u4e86\uff0c\u5b83\u5141\u8bb8\u6d4f\u89c8\u5668\u5bf9\u4e8e\u8bbe\u7f6e\u4e86\u8be5\u5c5e\u6027\u7684\u5143\u7d20\u8fdb\u884c\u5224\u65ad\uff0c\u5982\u679c\u8be5\u5143\u7d20\u5f53\u524d\u4e0d\u5904\u4e8e\u89c6\u53e3\u5185\uff0c\u5219\u4e0d\u6e32\u67d3\u8be5\u5143\u7d20\u3002\\n\\n\u6211\u4eec\u57fa\u4e8e\u4e0a\u8ff0\u7684\u4ee3\u7801\uff0c\u53ea\u9700\u8981\u6700\u5c0f\u5316\uff0c\u6dfb\u52a0\u8fd9\u6837\u4e00\u6bb5\u4ee3\u7801\uff1a\\n```CSS\\n.paragraph {\\n  content-visibility: auto;\\n}\\n```\\n\u518d\u770b\u770b\u6548\u679c\uff0c\u4ed4\u7ec6\u89c2\u5bdf\u53f3\u4fa7\u7684\u6eda\u52a8\u6761\uff1a\\n\\n![image](./img/content.visibility.2.png)\\n\\n\u53ef\u80fd\u4f60\u8fd8\u6ca1\u610f\u8bc6\u5230\u53d1\u751f\u4e86\u4ec0\u4e48\uff0c\u6211\u4eec\u5bf9\u6bd4\u4e0b\u6dfb\u52a0\u4e86 `content-visibility: auto` \u548c\u6ca1\u6709\u6dfb\u52a0 `content-visibility: auto` \u7684\u4e24\u79cd\u6548\u679c\u4e0b\u6587\u672c\u7684\u6574\u4f53\u9ad8\u5ea6\uff1a\\n\\n\\n![image](./img/content.visibility.3.png)\\n\\n\u6709\u7740\u975e\u5e38\u660e\u663e\u7684\u5dee\u5f02\uff0c\u8fd9\u662f\u56e0\u4e3a\uff0c\u8bbe\u7f6e\u4e86 `content-visibility: auto` \u7684\u5143\u7d20\uff0c\u5728\u975e\u53ef\u89c6\u533a\u57df\u5185\uff0c\u76ee\u524d\u5e76\u6ca1\u6709\u88ab\u6e32\u67d3\uff0c\u56e0\u6b64\uff0c\u53f3\u4fa7\u5185\u5bb9\u7684\u9ad8\u5ea6\u5176\u5b9e\u662f\u6bd4\u6b63\u5e38\u72b6\u6001\u4e0b\u5c11\u4e86\u4e00\u5927\u622a\u7684\u3002\\n\\n\u6211\u4eec\u5b9e\u9645\u5f00\u59cb\u8fdb\u884c\u6eda\u52a8\uff0c\u770b\u770b\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1a\\n\\n![image](./img/content.visibility.4.gif)\\n\\n\u7531\u4e8e\u4e0b\u65b9\u7684\u5143\u7d20\u5728\u6eda\u52a8\u7684\u8fc7\u7a0b\u4e2d\uff0c\u51fa\u73b0\u5728\u89c6\u53e3\u8303\u56f4\u5185\u624d\u88ab\u6e32\u67d3\uff0c\u56e0\u6b64\uff0c\u6eda\u52a8\u6761\u51fa\u73b0\u4e86\u660e\u663e\u7684\u98d8\u5ffd\u4e0d\u5b9a\u7684\u6296\u52a8\u73b0\u8c61\u3002\uff08\u5f53\u7136\u8fd9\u4e5f\u662f\u4f7f\u7528\u4e86 `content-visibility: auto` \u7684\u4e00\u4e2a\u5c0f\u95ee\u9898\u4e4b\u4e00\uff09\uff0c\u4e0d\u8fc7\u660e\u663e\u53ef\u4ee5\u770b\u51fa\uff0c\u8fd9\u4e0e\u6211\u4eec\u901a\u5e38\u4f7f\u7528 JavaScript \u5b9e\u73b0\u7684\u61d2\u52a0\u8f7d\u6216\u8005\u5ef6\u8fdf\u52a0\u8f7d\u975e\u5e38\u7c7b\u4f3c\u3002\\n\\n\u5f53\u7136\uff0c\u4e0e\u61d2\u52a0\u8f7d\u4e0d\u540c\u7684\u662f\uff0c\u5728\u5411\u4e0b\u6eda\u52a8\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e0a\u65b9\u6d88\u5931\u7684\u5df2\u7ecf\u88ab\u6e32\u67d3\u8fc7\u4e14\u6d88\u5931\u5728\u89c6\u53e3\u7684\u5143\u7d20\uff0c\u4e5f\u4f1a\u56e0\u4e3a\u6d88\u5931\u5728\u89c6\u53e3\u4e2d\uff0c\u91cd\u65b0\u88ab\u9690\u85cf\u3002\u56e0\u6b64\uff0c\u5373\u4fbf\u9875\u9762\u6eda\u52a8\u5230\u6700\u4e0b\u65b9\uff0c\u6574\u4f53\u7684\u6eda\u52a8\u6761\u9ad8\u5ea6\u8fd8\u662f\u6ca1\u6709\u4ec0\u4e48\u53d8\u5316\u7684\u3002\\n\\n\\n## 5. \u5229\u7528 contain-intrinsic-size \u89e3\u51b3\u6eda\u52a8\u6761\u6296\u52a8\u95ee\u9898\\n\\n\u4ece\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u4e5f\u80fd\u770b\u5230\uff0c\u5728\u5229\u7528 `content-visibility: auto` \u5904\u7406\u957f\u6587\u672c\u3001\u957f\u5217\u8868\u7684\u65f6\u5019\u3002\u5728\u6eda\u52a8\u9875\u9762\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6eda\u52a8\u6761\u4e00\u76f4\u5728\u6296\u52a8\uff0c\u8fd9\u4e0d\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u4f53\u9a8c\u3002\\n\\n\u597d\u5728\uff0c\u89c4\u8303\u5236\u5b9a\u8005\u4e5f\u53d1\u73b0\u4e86\u8fd9\u4e2a\u95ee\u9898\u3002\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u53e6\u5916\u4e00\u4e2a `CSS` \u5c5e\u6027\uff0c\u4e5f\u5c31\u662f\u6587\u7ae0\u4e00\u5f00\u5934\u63d0\u5230\u7684\u53e6\u5916\u4e00\u4e2a\u5c5e\u6027 `contain-intrinsic-size` \u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\\n\\n:::info MDN\\n`contain-intrinsic-size` \uff1a\u63a7\u5236\u7531 `content-visibility` \u6307\u5b9a\u7684\u5143\u7d20\u7684\u81ea\u7136\u5927\u5c0f\u3002\\n:::\\n\\n\u4ec0\u4e48\u610f\u601d\u5462\uff1f\u8fd8\u662f\u4e0a\u9762\u7684\u4f8b\u5b50\\n```HTML\\n<div class=\\"g-wrap\\">\\n  <div class=\\"paragraph\\">...</div>\\n  // ... \u5305\u542b\u4e86 N \u4e2a paragraph\\n  <div class=\\"paragraph\\">...</div>\\n</div>\\n```\\n\u5982\u679c\u6211\u4eec\u4e0d\u4f7f\u7528 `contain-intrinsic-size`\uff0c\u53ea\u5bf9\u89c6\u53e3\u4e4b\u5916\u7684\u5143\u7d20\u4f7f\u7528 `content-visibility: auto`\uff0c\u90a3\u4e48\u89c6\u53e3\u5916\u7684\u5143\u7d20\u9ad8\u5ea6\u901a\u5e38\u5c31\u4e3a 0\u3002\u5bfc\u81f4\u5b9e\u9645\u7684\u6eda\u52a8\u6548\u679c\uff0c\u6eda\u52a8\u6761\u5c31\u662f\u6296\u52a8\u7684\u3002\\n\\n\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u540c\u65f6\u5229\u7528\u4e0a `contain-intrinsic-size`\uff0c\u5982\u679c\u80fd\u51c6\u786e\u77e5\u9053\u8bbe\u7f6e\u4e86 `content-visibility: auto` \u7684\u5143\u7d20\u5728\u6e32\u67d3\u72b6\u6001\u4e0b\u7684\u9ad8\u5ea6\uff0c\u5c31\u586b\u5199\u5bf9\u5e94\u7684\u9ad8\u5ea6\u3002\u5982\u679c\u5982\u6cd5\u51c6\u786e\u77e5\u9053\u9ad8\u5ea6\uff0c\u4e5f\u53ef\u4ee5\u586b\u5199\u4e00\u4e2a\u5927\u6982\u7684\u503c\uff1a\\n\\n```CSS\\n.paragraph {\\n  content-visibility: auto;\\n  contain-intrinsic-size: 320px;\\n}\\n```\\n\u5982\u6b64\u4e4b\u540e\uff0c\u6d4f\u89c8\u5668\u4f1a\u7ed9\u672a\u88ab\u5b9e\u9645\u6e32\u67d3\u7684\u89c6\u53e3\u4e4b\u5916\u7684 `.paragraph` \u5143\u7d20\u4e00\u4e2a\u9ad8\u5ea6\uff0c\u907f\u514d\u51fa\u73b0\u6eda\u52a8\u6761\u6296\u52a8\u7684\u73b0\u8c61\uff1a\\n\\n![image](./img/content.visibility.5.gif)\\n\\n## 6.content-visibility \u7684\u4e00\u4e9b\u5176\u4ed6\u95ee\u9898\\n\\n\u76ee\u524d\u517c\u5bb9\u6027\u8fd8\u662f\u6bd4\u8f83\u60e8\u6de1\u7684\uff0c\u9700\u8981\u518d\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\u3002\u5f53\u7136\uff0c\u7531\u4e8e\u8be5\u5c5e\u6027\u5c5e\u4e8e\u6e10\u8fdb\u589e\u5f3a\u4e00\u7c7b\u7684\u529f\u80fd\uff0c\u5373\u4fbf\u5931\u6548\uff0c\u4e5f\u5b8c\u5168\u4e0d\u5f71\u54cd\u9875\u9762\u672c\u8eab\u7684\u5c55\u793a\u3002\\n\u540c\u65f6\uff0c\u4e5f\u6709\u4e00\u4e9b\u540c\u5b66\u8868\u793a\uff0c\u5229\u7528 `content-visibility: auto` \u53ea\u80fd\u89e3\u51b3\u90e8\u5206\u573a\u666f\uff0c\u5728\u6d77\u91cf DOM \u7684\u573a\u666f\u4e0b\u7684\u5b9e\u9645\u6548\u679c\uff0c\u8fd8\u6709\u5f85\u8fdb\u4e00\u6b65\u7684\u5b9e\u6d4b\u3002\u771f\u6b63\u8fd0\u7528\u7684\u65f6\u5019\uff0c\u591a\u505a\u5bf9\u6bd4\uff0c\u518d\u505a\u53d6\u820d\u3002\\n\u5f53\u7136\uff0c\u73b0\u4ee3\u6d4f\u89c8\u5668\u5df2\u7ecf\u8d8a\u6765\u8d8a\u667a\u80fd\uff0c\u7c7b\u4f3c `content-visibility` \u529f\u80fd\u7684\u5c5e\u6027\u4e5f\u8d8a\u6765\u8d8a\u591a\uff0c\u6211\u4eec\u5728\u6027\u80fd\u4f18\u5316\u7684\u8def\u4e0a\u6709\u4e86\u66f4\u591a\u9009\u62e9\uff0c\u603b\u5f52\u662f\u4e00\u4ef6\u597d\u4e8b\u3002"},{"id":"dragDir","metadata":{"permalink":"/blog/dragDir","editUrl":"https://github.com/jonbenery/weblog/blog/2023-01-30-dragDir/index.mdx","source":"@site/blog/2023-01-30-dragDir/index.mdx","title":"\u62d6\u62fd\u83b7\u53d6\u6587\u4ef6\u5939\u4e0b\u7684\u6240\u6709\u6587\u4ef6","description":"1. \u9996\u5148\u6211\u4eec\u6765\u8ba4\u8bc6\u4e00\u4e0b\u5173\u4e8e\u6587\u4ef6\u7684\u4e00\u4e9bapi","date":"2023-01-30T00:00:00.000Z","formattedDate":"January 30, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"}],"readingTime":2.155,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"dragDir","title":"\u62d6\u62fd\u83b7\u53d6\u6587\u4ef6\u5939\u4e0b\u7684\u6240\u6709\u6587\u4ef6","authors":"jonben","tags":["javascript"]},"prevItem":{"title":"\u7528css\u65b0\u7279\u6027\u4f18\u5316\u957f\u5217\u8868","permalink":"/blog/contentVisibility"},"nextItem":{"title":"\u591a\u5c42\u7ea7\u5143\u7d20\u62d6\u653e","permalink":"/blog/elementDrag"}},"content":"import DragDirectory from \'./index.js\'\\n\\n## 1. \u9996\u5148\u6211\u4eec\u6765\u8ba4\u8bc6\u4e00\u4e0b\u5173\u4e8e\u6587\u4ef6\u7684\u4e00\u4e9bapi\\n\\n\uff08\u4ee5\u4e0b\u5185\u5bb9\u5f15\u7528\u81f3MDN\uff09\\n\\n### 1.1 [DataTransferItem.webkitGetAsEntry()](https://developer.mozilla.org/zh-CN/docs/Web/API/DataTransferItem/webkitGetAsEntry)\\n\\n\u5982\u679c\u7531\u6587\u4ef6\u63cf\u8ff0\u7684\u9879\u76eeDataTransferItem\u662f\u6587\u4ef6\uff0c\u5219webkitGetAsEntry()\u8fd4\u56deFileSystemFileEntry\u6216FileSystemDirectoryEntry\u8868\u793a\u5b83\u3002\u5982\u679c\u8be5\u9879\u4e0d\u662f\u6587\u4ef6\uff0cnull\u5219\u8fd4\u56de\u3002\\n\\n### 1.2 [FileSystemFileEntry](https://developer.mozilla.org/zh-CN/docs/Web/API/FileSystemFileEntry)\\n\\n\u6587\u4ef6\u7cfb\u7edf API \u7684 FileSystemFileEntry \u63a5\u53e3\u8868\u793a\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u3002\u5b83\u63d0\u4f9b\u4e86\u5c5e\u6027\uff0c\u63cf\u8ff0\u6587\u4ef6\u7684\u5c5e\u6027\uff0c\u4ee5\u53ca file() (en-US) \u65b9\u6cd5\uff0c\u5b83\u521b\u5efa\u4e86\u53ef\u4ee5\u7528\u4e8e\u8bfb\u53d6\u6587\u4ef6\u7684 File \u5bf9\u8c61\u3002\\n\\n### 1.3 [FileSystemDirectoryEntry](https://developer.mozilla.org/zh-CN/docs/Web/API/FileSystemDirectoryEntry)\\n\\n\u6587\u4ef6\u548c\u76ee\u5f55\u6761\u76ee API \u7684 FileSystemDirectoryEntry \u63a5\u53e3\u8868\u793a\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u76ee\u5f55\u3002\u5b83\u63d0\u4f9b\u4e86\u65b9\u6cd5\uff0c\u4f7f\u5176\u80fd\u591f\u8bbf\u95ee\u548c\u64cd\u4f5c\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\uff0c\u4ee5\u53ca\u8bbf\u95ee\u76ee\u5f55\u4e2d\u7684\u6761\u76ee\u3002\\n\\n## 2. \u63a5\u4e0b\u6765\u6211\u4eec\u7f16\u5199\u4ee3\u7801\\n\\n```html\\n<div id=\\"area\\"></div>\\n```\\n```css\\n #area {\\n    width: 200px;\\n    height: 200px;\\n    border: 1px solid red;\\n  }\\n```\\n```js\\nconst area = document.getElementById(\'area\');\\n\\narea.ondragover = (e) => {\\n  e.preventDefault();\\n};\\n\\narea.ondragleave = (e) => {\\n  e.preventDefault();\\n};\\n\\narea.ondrop = function(evt) {\\n  evt.preventDefault();\\n  evt.stopPropagation();\\n  const items = evt.dataTransfer.items;\\n  if (items.length > 1) {\\n    return console.log(\\"\u4e00\u6b21\u53ea\u5141\u8bb8\u4e0a\u4f20\u4e00\u4e2a\u6587\u4ef6\u5939\\");\\n  }\\n  const item = items[0].webkitGetAsEntry();\\n  if (item && item.isDirectory) {\\n    traverseFileTree(item).then(res => {\\n      console.log(res);\\n    });\\n  }\\n}\\n\\n// \u5206\u6790\u6587\u4ef6\u5939\u4e0b\u7684\u6587\u4ef6\\nfunction traverseFileTree(item) {\\n  return new Promise((resolve, reject) => {\\n    let res = [];\\n    let timer;\\n    const internalProces = (item, path, res) => {\\n      if (item.isFile) {\\n        item.file(file => {\\n          file.path = path + file.name;\\n          const newFile = new File([file], file.path, { type: file.type });\\n          res.push(newFile);\\n          timer = setTimeout(() => {\\n            resolve(res);\\n          }, 600);\\n        });\\n      } else if (item.isDirectory) {\\n        clearTimeout(timer);\\n        const dirReader = item.createReader();\\n        dirReader.readEntries(entries => {\\n          for (let i = 0; i < entries.length; i++) {\\n            internalProces(entries[i], path + item.name + \\"/\\", res);\\n          }\\n        }, (error) => reject(error));\\n      }\\n    };\\n    internalProces(item, \\"\\", res);\\n  })\\n}\\n```\\n\\n## \u8bd5\u4e00\u8bd5\u5427\\n<DragDirectory />\\n\\n## 3. \u5f53\u7136\u6211\u4eec\u53ef\u4ee5\u5229\u7528input\u7684\u539f\u751f\u4e8b\u4ef6\u6765\u83b7\u53d6\u6587\u4ef6\u5939\u5185\u7684\u5185\u5bb9\\n\\n```html\\n<input type=\\"file\\" webkitdirectory id=\\"ipt\\"/>\\n```\\n\\n```js\\nconst ipt = document.getElementById(\'ipt\')\\nipt.onchange = function(e) {\\n  console.log(ipt.files);\\n}\\n```"},{"id":"elementDrag","metadata":{"permalink":"/blog/elementDrag","editUrl":"https://github.com/jonbenery/weblog/blog/2023-01-30-elementDrag/index.md","source":"@site/blog/2023-01-30-elementDrag/index.md","title":"\u591a\u5c42\u7ea7\u5143\u7d20\u62d6\u653e","description":"\u6b63\u5e38\u62d6\u62fd\u6587\u4ef6\u5230\u6307\u5b9a\u5bb9\u5668\u65f6\uff0c\u5982\u679c\u5bb9\u5668\u5185\u90e8\u6ca1\u6709\u5143\u7d20\uff0c\u53ef\u4ee5\u6b63\u5e38\u54cd\u5e94enter\u548cleave\u4e8b\u4ef6\uff0c\u5982\u679c\u5185\u90e8\u5177\u6709\u5143\u7d20\uff0c\u867d\u7136\u53ea\u662f\u5728\u7236\u7ea7\u522b\u5bb9\u5668\u65f6\u6dfb\u52a0\u7684\u4e8b\u4ef6\uff0c\u4f9d\u7136\u4f1a\u5bfc\u81f4\u5b50\u5143\u7d20\u8bef\u89e6\u53d1\uff0c\u5728\u62d6\u62fd\u65f6\u4f1a\u9891\u7e41\u51fa\u73b0ondragenter\u548condragleave\u4e8b\u4ef6\uff0c\u539f\u56e0\u662f\u5192\u6ce1\u5bfc\u81f4\u3002","date":"2023-01-30T00:00:00.000Z","formattedDate":"January 30, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"}],"readingTime":1.465,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"elementDrag","title":"\u591a\u5c42\u7ea7\u5143\u7d20\u62d6\u653e","authors":"jonben","tags":["javascript"]},"prevItem":{"title":"\u62d6\u62fd\u83b7\u53d6\u6587\u4ef6\u5939\u4e0b\u7684\u6240\u6709\u6587\u4ef6","permalink":"/blog/dragDir"},"nextItem":{"title":"\u524d\u7aef\u6587\u4ef6\u4e0b\u8f7d\u7684\u65b9\u5f0f","permalink":"/blog/fileDownload"}},"content":"\u6b63\u5e38\u62d6\u62fd\u6587\u4ef6\u5230\u6307\u5b9a\u5bb9\u5668\u65f6\uff0c\u5982\u679c\u5bb9\u5668\u5185\u90e8\u6ca1\u6709\u5143\u7d20\uff0c\u53ef\u4ee5\u6b63\u5e38\u54cd\u5e94enter\u548cleave\u4e8b\u4ef6\uff0c\u5982\u679c\u5185\u90e8\u5177\u6709\u5143\u7d20\uff0c\u867d\u7136\u53ea\u662f\u5728\u7236\u7ea7\u522b\u5bb9\u5668\u65f6\u6dfb\u52a0\u7684\u4e8b\u4ef6\uff0c\u4f9d\u7136\u4f1a\u5bfc\u81f4\u5b50\u5143\u7d20\u8bef\u89e6\u53d1\uff0c\u5728\u62d6\u62fd\u65f6\u4f1a\u9891\u7e41\u51fa\u73b0ondragenter\u548condragleave\u4e8b\u4ef6\uff0c\u539f\u56e0\u662f\u5192\u6ce1\u5bfc\u81f4\u3002\\n\\n```html\\n<li class=\\"box\\"\\n    ondragenter=\\"handledragenter()\\"\\n    ondragleave=\\"handledragleave()\\"\\n    ondrop=\\"drop\\">\\n  <span>\u5185\u90e8\u76d2\u5b501\\n    <i>\u5185\u90e8\u76d2\u5b502</i>\\n  </span>\\n</li>\\n```\\n\\n```javascript\\nfunction handledragenter() {\\n  console.log(\'\u8fdb\u5165\');\\n}\\nfunction handledragleave() {\\n  console.log(\'\u79bb\u5f00\');\\n}\\n```\\n\u4ece\u5916\u90e8\u79fb\u52a8\u5230\u5185\u90e8\uff0c\u4e8b\u4ef6\u89e6\u53d1\u987a\u5e8f\u5982\u4e0b:\\n- enter parent\\n- enter child\\n- leave parent\\n- enter sub-child\\n- leave child\\n\\n\u6293\u53d6\u5143\u7d20\u62d6\u62fd\u5230\u5bb9\u5668\u5185\u65f6\uff0c\u89e6\u53d1\u987a\u5e8f\u662f\u5148enter\u4e0b\u4e00\u4e2a\uff0c\u518dleave\u4e0a\u4e00\u4e2a\uff0c\u56e0\u6b64\u4e00\u4e2a\u5bb9\u5668\u5185\uff0c\u89e6\u53d1\u5b50\u5143\u7d20\uff0c\u5224\u65ad\u5947\u6570\u548c\u5076\u6570\u5373\u53ef\u8fc7\u6ee4\u6389\u5185\u90e8\u7684\u8bef\u5224\u65ad\uff0c\u53d6\u4e00\u4e2a\u53d8\u91cf\uff0c\u5728enter\u548cleave\u65f6\u90fd\u9012\u589e\uff0c\u4e4b\u540e\u5224\u65ad\u662f\u5947\u6570\u8fd8\u662f\u5076\u6570\u6765\u51b3\u5b9a\u662f\u5426\u89e6\u53d1\u4e8b\u4ef6\uff0c\u6700\u540e\u4e00\u6b21leave\u540e\u5c06\u53d8\u91cf\u91cd\u7f6e\u4e3a0\uff1b\\n\\n\u6539\u8fdb\uff1a\\n```javascript\\nlet count = 0\\nfunction handledragenter() {\\n  count++\\n  if (count % 2) {\\n    console.log(\'\u8fdb\u5165\', count);\\n  }\\n}\\nfunction handledragleave() {\\n  count++\\n  if (!(count % 2)) {\\n    console.log(\'\u79bb\u5f00\', count);\\n  }\\n}\\n```"},{"id":"fileDownload","metadata":{"permalink":"/blog/fileDownload","editUrl":"https://github.com/jonbenery/weblog/blog/2023-01-30-fileDownload/index.md","source":"@site/blog/2023-01-30-fileDownload/index.md","title":"\u524d\u7aef\u6587\u4ef6\u4e0b\u8f7d\u7684\u65b9\u5f0f","description":"1. a\u6807\u7b7e","date":"2023-01-30T00:00:00.000Z","formattedDate":"January 30, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"}],"readingTime":8.32,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"fileDownload","title":"\u524d\u7aef\u6587\u4ef6\u4e0b\u8f7d\u7684\u65b9\u5f0f","authors":"jonben","tags":["javascript"]},"prevItem":{"title":"\u591a\u5c42\u7ea7\u5143\u7d20\u62d6\u653e","permalink":"/blog/elementDrag"},"nextItem":{"title":"\u8ba1\u7b97\u56fe\u7247\u7b49\u6bd4\u7f29\u653e\u540e\u7684\u5bbd\u9ad8","permalink":"/blog/getImageRatio"}},"content":"## 1. a\u6807\u7b7e\\n\\n\u901a\u8fc7`a`\u6807\u7b7e\u7684`download`\u5c5e\u6027\u6765\u5b9e\u73b0\u6587\u4ef6\u4e0b\u8f7d\uff0c\u8fd9\u79cd\u65b9\u5f0f\u662f\u6700\u7b80\u5355\u7684\uff0c\u4e5f\u662f\u6211\u4eec\u6bd4\u8f83\u5e38\u7528\u7684\u65b9\u5f0f\uff0c\u5148\u6765\u770b\u793a\u4f8b\u4ee3\u7801\uff1a\\n\\n```js\\n<a href=\\"http://www.baidu.com\\" download=\\"baidu.html\\">\u4e0b\u8f7d</a>\\n```\\n\\n\u5c31\u4e0a\u9762\u7684\u8fd9\u4e2a\u793a\u4f8b\uff0c\u6211\u4eec\u70b9\u51fb\u4e0b\u8f7d\uff0c\u53d1\u73b0\u662f\u8df3\u8f6c\u5230\u4e86\u767e\u5ea6\u7684\u9996\u9875\uff0c\u5e76\u6ca1\u6709\u771f\u7684\u4e0b\u8f7d\u6587\u4ef6\u3002\\n\u56e0\u4e3aa\u6807\u7b7e\u4e0b\u8f7d\u53ea\u80fd\u4e0b\u8f7d\u540c\u6e90\u7684\u6587\u4ef6\uff0c\u5982\u679c\u662f\u8de8\u57df\u7684\u6587\u4ef6\uff0c\u8fd9\u91cc\u5305\u62ec\u56fe\u7247\u3001\u97f3\u89c6\u9891\u7b49\u5a92\u4f53\u6587\u4ef6\uff0c\u90fd\u662f\u9884\u89c8\uff0c\u4e5f\u65e0\u6cd5\u4e0b\u8f7d\u3002\\n\\n\u4e0a\u9762\u7684\u4ee3\u7801\u662f\u76f4\u63a5\u901a\u8fc7\u4e66\u5199a\u6807\u7b7e\u6765\u5b9e\u73b0\u6587\u4ef6\u4e0b\u8f7d\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7js\u6765\u5b9e\u73b0\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n\\n```js\\nconst a = document.createElement(\'a\')\\na.href = \'http://www.baidu.com\'\\na.download = \'baidu.html\'\\na.click()\\n```\\n\\n\u6548\u679c\u548c\u4e0a\u9762\u7684\u4e00\u6837\uff0c\u90fd\u662f\u8df3\u8f6c\u5230\u767e\u5ea6\u7684\u9996\u9875\uff0c\u6ca1\u6709\u4e0b\u8f7d\u6587\u4ef6\u3002\\n\u8fd9\u91cc\u7684\u91cd\u70b9\u662f`a`\u6807\u7b7e\u7684`download`\u5c5e\u6027\uff0c\u8fd9\u4e2a\u5c5e\u6027\u662f`HTML5`\u65b0\u589e\u7684\u3002\\n\u5b83\u7684\u4f5c\u7528\u662f\u6307\u5b9a\u4e0b\u8f7d\u7684\u6587\u4ef6\u540d\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\uff0c\u90a3\u4e48\u4e0b\u8f7d\u7684\u6587\u4ef6\u540d\u5c31\u4f1a\u6839\u636e\u8bf7\u6c42\u5185\u5bb9\u7684`Content-Disposition`\u6765\u786e\u5b9a\uff0c\u5982\u679c\u6ca1\u6709`Content-Disposition`\uff0c\u90a3\u4e48\u5c31\u4f1a\u4f7f\u7528\u8bf7\u6c42\u7684`URL`\u7684\u6700\u540e\u4e00\u90e8\u5206\u4f5c\u4e3a\u6587\u4ef6\u540d\u3002\\n\\n## 2. window.open\\n\\n\u4e0a\u9762\u4f7f\u7528a\u6807\u7b7e\u7684\u6848\u4f8b\u4e5f\u53ef\u4ee5\u901a\u8fc7window.open\u6765\u5b9e\u73b0\uff0c\u6548\u679c\u662f\u4e00\u6837\u7684\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```js\\nwindow.open(\'http://www.baidu.com\', \'_blank\')\\n```\\n\\n\u8fd9\u91cc\u7684`_blank`\u662f\u6307\u5b9a\u6253\u5f00\u7684\u65b9\u5f0f\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\uff0c\u90a3\u4e48\u5c31\u4f1a\u5728\u5f53\u524d\u9875\u9762\u6253\u5f00\uff0c\u8fd9\u91cc\u6307\u5b9a`_blank`\uff0c\u5c31\u662f\u5728\u65b0\u7684\u9875\u9762\u6253\u5f00\u3002\\n\\n\u540c\u6837`a`\u6807\u7b7e\u7684`download`\u5c5e\u6027\u4e5f\u662f\u53ef\u4ee5\u4f7f\u7528\u7684\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```js\\nwindow.open(\'http://www.baidu.com\', \'_blank\', \'download=baidu.html\')\\n```\\n\u5f53\u7136\u8fd9\u79cd\u65b9\u5f0f\u4e5f\u662f\u6709\u7f3a\u9677\u7684\uff0c\u5bf9\u6bd4\u4e8e`a`\u6807\u7b7e\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4e0d\u80fd\u4e0b\u8f7d``.html\u3001.htm\u3001.xml\u3001.xhtml`\u7b49\u6587\u4ef6\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u6587\u4ef6\u4f1a\u88ab\u5f53\u6210`html`\u6587\u4ef6\u6765\u5904\u7406\uff0c\u6240\u4ee5\u4f1a\u76f4\u63a5\u5728\u5f53\u524d\u9875\u9762\u6253\u5f00\u3002\\n\u540c\u6837\u4e5f\u4e0d\u80fd\u4e0b\u8f7d\u8de8\u57df\u7684\u6587\u4ef6\uff0c\u6bd5\u7adf\u662f`window.open`\uff0c\u4e0d\u662f`window.download`\uff08`window.download`\u662f\u5047\u60f3\uff09\u3002\\n\\n## 3. location.href\\n\\n```js\\nlocation.href = \'http://www.baidu.com\'\\n```\\n\u8fd9\u79cd\u65b9\u5f0f\u62e5\u6709`window.open`\u7684\u6240\u6709\u7f3a\u9677\uff0c\u6240\u4ee5\u4e0d\u63a8\u8350\u4f7f\u7528\uff0c\u8fd9\u91cc\u53ea\u5f53\u4f5c\u4e86\u89e3\uff0c\u6240\u4ee5\u4e0d\u505a\u8fc7\u591a\u7684\u8bb2\u89e3\u3002\\n\\n## 4.  location.?\u5176\u4ed6\u5c5e\u6027\\n\u8fd9\u91cc\u7684\u5176\u4ed6\u6307\u4ee3\u7684\u90fd\u662f\u80fd\u8df3\u8f6c\u9875\u9762\u7684\u5c5e\u6027\uff0c\u6bd4\u5982`location.assign\u3001location.replace\u3001location.reload`\u7b49\uff0c\u8fd9\u4e9b\u5c5e\u6027\u90fd\u662f\u53ef\u4ee5\u5b9e\u73b0\u6587\u4ef6\u4e0b\u8f7d\u7684\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n```js\\nlocation.assign(\'http://www.baidu.com\')\\nlocation.replace(\'http://www.baidu.com\')\\nlocation.reload(\'http://www.baidu.com\')\\n```\\n\u8fd9\u91cc\u7684`location.reload`\u662f\u6709\u70b9\u7279\u6b8a\u7684\uff0c\u5b83\u7684\u4f5c\u7528\u662f\u91cd\u65b0\u52a0\u8f7d\u5f53\u524d\u9875\u9762\uff0c\u4f46\u662f\u5b83\u4e5f\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u8fd9\u4e2a\u53c2\u6570\u5c31\u662f\u8981\u8df3\u8f6c\u7684\u9875\u9762\uff0c\u6240\u4ee5\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u6587\u4ef6\u4e0b\u8f7d\u3002\\n\u5f53\u7136\u540c`location.href`\u4e00\u6837\uff0c\u8fd9\u4e9b\u65b9\u5f0f\u7684\u7f3a\u70b9\u90fd\u4e00\u6837\uff0c\u540c\u65f6\u8fd8\u6709\u5c5e\u4e8e\u6bcf\u4e2a\u5c5e\u6027\u81ea\u8eab\u7684\u7279\u6027\uff0c\u8fd9\u91cc\u53ea\u5f53\u62d3\u5c55\u77e5\u8bc6\uff0c\u4e0d\u505a\u8fc7\u591a\u7684\u8bb2\u89e3\u3002\\n\\n\\n## 5. XMLHttpRequest\\n\u8fd9\u79cd\u65b9\u5f0f\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684`ajax`\u4e0b\u8f7d\uff0c\u5305\u62ec`axios\u3001fetch`\u7b49\u90fd\u662f\u76f8\u540c\u7684\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n```js\\nconst xhr = new XMLHttpRequest()\\nxhr.open(\'GET\', \'http://www.baidu.com\')\\nxhr.send()\\n\\nxhr.onload = function () {\\n  const blob = new Blob([xhr.response], { type: \'text/html\' })\\n  const a = document.createElement(\'a\')\\n  a.href = URL.createObjectURL(blob)\\n  a.download = \'baidu.html\'\\n  a.click()\\n}\\n```\\n\u8fd9\u91cc\u5c31\u4e0d\u8bb2\u548c`XMLHttpRequest`\u76f8\u5173\u7684\u77e5\u8bc6\u4e86\uff0c\u53ea\u8bb2\u548c\u6587\u4ef6\u4e0b\u8f7d\u76f8\u5173\u7684\u90e8\u5206\u3002\\n\\n\u8fd9\u91cc\u4e3b\u8981\u7684\u903b\u8f91\u662f\u5f53\u6211\u4eec\u7684\u8bf7\u6c42\u6210\u529f\u540e\uff0c\u6211\u4eec\u4f1a\u62ff\u5230\u54cd\u5e94\u4f53\u7684`response`\uff0c\u8fd9\u4e2a`response`\u5c31\u662f\u6211\u4eec\u8981\u4e0b\u8f7d\u7684\u5185\u5bb9\uff0c\u7136\u540e\u6211\u4eec\u628a\u5b83\u8f6c\u6362\u6210`blob`\u5bf9\u8c61\uff0c\u7136\u540e\u901a\u8fc7`URL.createObjectURL`\u6765\u521b\u5efa\u4e00\u4e2a`url`\uff0c\u7136\u540e\u901a\u8fc7`a`\u6807\u7b7e\u7684`download`\u5c5e\u6027\u6765\u5b9e\u73b0\u6587\u4ef6\u4e0b\u8f7d\u3002\\n\\n\u8fd9\u91cc\u7684\u77e5\u8bc6\u70b9\u5c31\u6709\u4e24\u4e2a\uff0c\u4e00\u4e2a\u662f`blob`\u5bf9\u8c61\uff0c\u4e00\u4e2a\u662f`URL.createObjectURL`\u3002\\n\\n### 5.1. blob\\n\u4e0b\u9762\u662fblob\u5bf9\u8c61\u7684\u5b9a\u4e49\uff0c\u6765\u81ea[MDN](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob)\uff1a\\n\\n:::info  MDN\\nBlob\u5bf9\u8c61\u8868\u793a\u4e00\u4e2a\u4e0d\u53ef\u53d8\u3001\u539f\u59cb\u6570\u636e\u7684\u7c7b\u6587\u4ef6\u5bf9\u8c61\u3002\u5b83\u7684\u6570\u636e\u53ef\u4ee5\u6309\u6587\u672c\u6216\u4e8c\u8fdb\u5236\u7684\u683c\u5f0f\u8fdb\u884c\u8bfb\u53d6\uff0c\u4e5f\u53ef\u4ee5\u8f6c\u6362\u6210 ReadableStream \u6765\u7528\u4e8e\u6570\u636e\u64cd\u4f5c\u3002\\nBlob\u8868\u793a\u7684\u4e0d\u4e00\u5b9a\u662fJavaScript\u539f\u751f\u683c\u5f0f\u7684\u6570\u636e\u3002File \u63a5\u53e3\u57fa\u4e8e Blob\uff0c\u7ee7\u627f\u4e86blob\u7684\u529f\u80fd\u5e76\u5c06\u5176\u6269\u5c55\u4ee5\u652f\u6301\u7528\u6237\u7cfb\u7edf\u4e0a\u7684\u6587\u4ef6\u3002\\n:::\\n\\n`blob`\u5bf9\u8c61\u662f`html5`\u65b0\u589e\u7684\u5bf9\u8c61\uff0c\u5b83\u7684\u4f5c\u7528\u662f\u7528\u6765\u5b58\u50a8\u4e8c\u8fdb\u5236\u6570\u636e\u7684\uff0c\u6bd4\u5982\u56fe\u7247\u3001\u89c6\u9891\u3001\u97f3\u9891\u7b49\uff0c\u5b83\u7684\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a\\n```js\\n/**\\n * @param {Array} array \u4e8c\u8fdb\u5236\u6570\u636e\\n * @param {Object} options \u914d\u7f6e\u9879\\n *      @param {String} options.type \u6587\u4ef6\u7c7b\u578b\uff0c\u5b83\u4ee3\u8868\u4e86\u5c06\u4f1a\u88ab\u653e\u5165\u5230 blob \u4e2d\u7684\u6570\u7ec4\u5185\u5bb9\u7684 MIME \u7c7b\u578b\u3002\\n *      @param {String} options.endings \u7528\u4e8e\u6307\u5b9a\u5305\u542b\u884c\u7ed3\u675f\u7b26\\\\n\u7684\u5b57\u7b26\u4e32\u5982\u4f55\u88ab\u5199\u5165\u3002\u9ed8\u8ba4\u4e3atransparent\uff0c\u8868\u793a\u4e0d\u4f1a\u4fee\u6539\u884c\u7ed3\u675f\u7b26\u3002\u8fd8\u53ef\u4ee5\u6307\u5b9a\u4e3anative\uff0c\u8868\u793a\u4f1a\u5c06\\\\n\u8f6c\u6362\u4e3a\\\\r\\\\n\u3002\\n */\\nconst blob = new Blob([], { type: \'\' })\\n```\\n\u8fd9\u91cc\u4e3b\u8981\u5173\u6ce8\u7684\u662f`type`\u5c5e\u6027\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c`blob`\u5bf9\u8c61\u662f\u6ca1\u6709`type`\u5c5e\u6027\u7684\uff0c\u90a3\u4e48\u8fd9\u4e2a`Blob`\u5c31\u662f\u4e00\u4e2a\u65e0\u7c7b\u578b\u7684`Blob`\uff0c\u6587\u4ef6\u4e0d\u4f1a\u635f\u6bc1\uff0c\u4f46\u662f\u65e0\u6cd5\u88ab\u6b63\u5e38\u8bc6\u522b\u3002\\n\\n\\n### 5.2 URL.createObjectURL\\n\u4e0b\u9762\u6765\u81ea[MDN](https://developer.mozilla.org/zh-CN/docs/Web/API/URL/createObjectURL)\uff1a\\n\\n:::info MDN\\nURL.createObjectURL() \u9759\u6001\u65b9\u6cd5\u4f1a\u521b\u5efa\u4e00\u4e2a DOMString\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u4e2a\u8868\u793a\u53c2\u6570\u4e2d\u7ed9\u51fa\u7684\u5bf9\u8c61\u7684 URL\u3002\u8fd9\u4e2a URL \u7684\u751f\u547d\u5468\u671f\u548c\u521b\u5efa\u5b83\u7684\u7a97\u53e3\u4e2d\u7684 document \u7ed1\u5b9a\u3002\u8fd9\u4e2a\u65b0\u7684 URL \u5bf9\u8c61\u8868\u793a\u6307\u5b9a\u7684 File \u5bf9\u8c61\u6216 Blob \u5bf9\u8c61\u3002\\n:::\\n\\n\u8fd9\u4e2a\u65b9\u6cd5\u662f\u7528\u6765\u521b\u5efa\u4e00\u4e2a`url`\u7684\uff0c\u5b83\u7684\u4f5c\u7528\u662f\u628a\u4e00\u4e2a`blob`\u5bf9\u8c61\u8f6c\u6362\u6210\u4e00\u4e2a`url`\uff0c\u8fd9\u4e2a`url`\u53ef\u4ee5\u7528\u6765\u4e0b\u8f7d\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u7528\u6765\u9884\u89c8\u6587\u4ef6\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n```js\\nconst url = URL.createObjectURL(blob)\\n```\\n\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e2a`url`\u7684\u751f\u547d\u5468\u671f\u548c\u521b\u5efa\u5b83\u7684\u7a97\u53e3\u4e2d\u7684`document`\u7ed1\u5b9a\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u6211\u4eec\u7684`document`\u88ab\u9500\u6bc1\u540e\uff0c\u8fd9\u4e2a`url`\u5c31\u4f1a\u5931\u6548\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5728\u5408\u9002\u7684\u65f6\u673a\u9500\u6bc1\u5b83\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n```js\\nURL.revokeObjectURL(url)\\n```\\n\\n\u56de\u5230\u6211\u4eec\u521a\u624d\u4e0b\u8f7d\u7684\u95ee\u9898\uff0c\u6211\u4eec\u662f\u901a\u8fc7`blob`\u5bf9\u8c61\u6765\u89e3\u51b3\uff0c\u4f46\u662f\u6211\u4eec\u7684`type`\u5c5e\u6027\u662f\u5199\u6b7b\u7684\uff0c\u5982\u679c\u5728\u6587\u4ef6\u7c7b\u578b\u662f\u786e\u5b9a\u7684\u60c5\u51b5\u4e0b\u662f\u6ca1\u95ee\u9898\u7684\uff0c\u4f46\u662f\u5982\u679c\u8fd9\u4e2a\u63a5\u53e3\u5c31\u662f\u4e0b\u8f7d\u6587\u4ef6\u7684\u63a5\u53e3\uff0c\u6587\u4ef6\u53ef\u80fd\u662f\u5404\u79cd\u7c7b\u578b\u7684\uff0c\u6211\u4eec\u5e94\u8be5\u600e\u4e48\u5904\u7406\uff1f\\n\\n\u8fd9\u91cc\u7684\u6ca1\u6709\u6b63\u786e\u7b54\u6848\uff0c\u7b2c\u4e00\u4e2a\u53ef\u4ee5\u548c\u63a5\u53e3\u63d0\u4f9b\u8005\u8fdb\u884c\u534f\u5546\uff0c\u534f\u5546\u65b9\u6848\u662f\u4e0d\u786e\u5b9a\u7684\uff0c\u7b2c\u4e8c\u5c31\u662f\u901a\u8fc7`response`\u7684`header`\u6765\u83b7\u53d6\u6587\u4ef6\u7684`type`\uff0c\u4e5f\u662f\u6211\u4eec\u8981\u8bb2\u7684\uff1a\\n```js\\nconst type = response.headers[\'content-type\']\\n\\nconst blob = new Blob([response.data], { type })\\n```\\n\\n\u8fd9\u91cc\u6211\u4eec\u901a\u8fc7`response`\u7684`header`\u6765\u83b7\u53d6`type`\uff0c\u7136\u540e\u518d\u521b\u5efa`blob`\u5bf9\u8c61\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u6b63\u786e\u7684\u4e0b\u8f7d\u6587\u4ef6\u4e86\u3002\\n\\n\u5176\u5b9e`content-type`\u4e5f\u53ef\u80fd\u662f`application/octet-stream`\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u5c31\u9700\u8981\u901a\u8fc7`file-type`\u6765\u83b7\u53d6\u6587\u4ef6\u7684`type`\u4e86\u3002\\n\\n\u4e0b\u9762\u7684\u4ee3\u7801\u662f\u901a\u8fc7`file-type`\u6765\u83b7\u53d6\u6587\u4ef6\u7684`type`\uff1a\\n\\n```js\\nimport {fileTypeFromStream} from \'file-type\';\\n\\nconst type = await fileTypeFromStream(response.body);\\nconst blob = new Blob([response.data], { type })\\n```\\nfile-type\u7684\u4f7f\u7528\u53ef\u4ee5\u53c2\u8003[file-type](https://github.com/sindresorhus/file-type\\n)\u3002"},{"id":"getImageRatio","metadata":{"permalink":"/blog/getImageRatio","editUrl":"https://github.com/jonbenery/weblog/blog/2023-01-30-getImageRatio/index.md","source":"@site/blog/2023-01-30-getImageRatio/index.md","title":"\u8ba1\u7b97\u56fe\u7247\u7b49\u6bd4\u7f29\u653e\u540e\u7684\u5bbd\u9ad8","description":"\u6839\u636e\u56fe\u7247\u7684\u5bbd\u5ea6\u7b49\u6bd4\u7f29\u653e\u56fe\u7247\u5230\u4e00\u5b9a\u7684\u6bd4\u4f8b\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a","date":"2023-01-30T00:00:00.000Z","formattedDate":"January 30, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"}],"readingTime":0.9,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"getImageRatio","title":"\u8ba1\u7b97\u56fe\u7247\u7b49\u6bd4\u7f29\u653e\u540e\u7684\u5bbd\u9ad8","authors":"jonben","tags":["javascript"]},"prevItem":{"title":"\u524d\u7aef\u6587\u4ef6\u4e0b\u8f7d\u7684\u65b9\u5f0f","permalink":"/blog/fileDownload"},"nextItem":{"title":"\u83b7\u53d6\u4e00\u4e2a\u968f\u673a\u4e0d\u91cd\u590d\u7684\u5b57\u7b26\u4e32","permalink":"/blog/getRandomUid"}},"content":"\u6839\u636e\u56fe\u7247\u7684\u5bbd\u5ea6\u7b49\u6bd4\u7f29\u653e\u56fe\u7247\u5230\u4e00\u5b9a\u7684\u6bd4\u4f8b\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\\n```js\\nfunction getImgScaleRect(url, maxWidth = 200, maxHeight = 300) {\\n  // \u56fe\u7247\u7684\u5bbd\\n  let width = ((/imageHeight=(?<width>\\\\d+)/.exec(url) || {}).groups || {}).width;\\n  // \u56fe\u7247\u7684\u9ad8\\n  let height = ((/imageWidth=(?<height>\\\\d+)/.exec(url) || {}).groups || {}).height;\\n  // \u6bd4\u4f8b\\n  let b1 = width / maxWidth;\\n  let b2 = height / maxHeight;\\n  if (b1 <= 1 && b2 <= 1) {\\n    // width = width;\\n    // height = height;\\n  } else if (b1 <= 1 && b2 > 1) {\\n    width = width / b2;\\n    height = maxHeight;\\n  } else if (b1 > 1 && b2 <= 1) {\\n    width = maxWidth;\\n    height = height / b1;\\n  } else if (b1 > 1 && b2 > 1) {\\n    let b = b1 > b2 ? b1 : b2; // \u53d6\u6bd4\u4f8b\u5927\u7684\\n    width = width / b;\\n    height = height / b;\\n  }\\n  return {\\n    width: width + \'px\',\\n    height: height + \'px\'\\n  };\\n}\\n```"},{"id":"getRandomUid","metadata":{"permalink":"/blog/getRandomUid","editUrl":"https://github.com/jonbenery/weblog/blog/2023-01-30-getRandomUid/index.md","source":"@site/blog/2023-01-30-getRandomUid/index.md","title":"\u83b7\u53d6\u4e00\u4e2a\u968f\u673a\u4e0d\u91cd\u590d\u7684\u5b57\u7b26\u4e32","description":"1. \u81ea\u5df1\u5b9e\u73b0","date":"2023-01-30T00:00:00.000Z","formattedDate":"January 30, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"}],"readingTime":0.405,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"getRandomUid","title":"\u83b7\u53d6\u4e00\u4e2a\u968f\u673a\u4e0d\u91cd\u590d\u7684\u5b57\u7b26\u4e32","authors":"jonben","tags":["javascript"]},"prevItem":{"title":"\u8ba1\u7b97\u56fe\u7247\u7b49\u6bd4\u7f29\u653e\u540e\u7684\u5bbd\u9ad8","permalink":"/blog/getImageRatio"},"nextItem":{"title":"\u9f20\u6807\u7684\u62d6\u62fd\u6a21\u62df\u6eda\u52a8\u6761\u6eda\u52a8","permalink":"/blog/mousemoveSimulationScroll"}},"content":"### 1. \u81ea\u5df1\u5b9e\u73b0\\n\\n```js\\nfunction getGenUID() {\\n  let date = new Date().getTime();\\n  let uuid = \\"xxxxxx4xxxyxxxxxxx\\".replace(/[xy]/g, function (c) {\\n    let r = (date + Math.random() * 16) % 16 | 0;\\n    date = Math.floor(date / 16);\\n    return (c == \\"x\\" ? r : (r & 0x3) | 0x8).toString(16);\\n  });\\n  return uuid;\\n}\\n\\n```\\n\\n### 2. \u8fd8\u6709\u4e00\u4e2a\u975e\u5e38\u597d\u7528\u7684\u5e93`nanoid`\\n\\n```js\\nimport { nanoid } from \'nanoid\';\\nconst uid = nanoid();\\n```"},{"id":"mousemoveSimulationScroll","metadata":{"permalink":"/blog/mousemoveSimulationScroll","editUrl":"https://github.com/jonbenery/weblog/blog/2023-01-30-mousemoveSimulationScroll/index.md","source":"@site/blog/2023-01-30-mousemoveSimulationScroll/index.md","title":"\u9f20\u6807\u7684\u62d6\u62fd\u6a21\u62df\u6eda\u52a8\u6761\u6eda\u52a8","description":"\u76ee\u6807","date":"2023-01-30T00:00:00.000Z","formattedDate":"January 30, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"}],"readingTime":2.845,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"mousemoveSimulationScroll","title":"\u9f20\u6807\u7684\u62d6\u62fd\u6a21\u62df\u6eda\u52a8\u6761\u6eda\u52a8","authors":"jonben","tags":["javascript"]},"prevItem":{"title":"\u83b7\u53d6\u4e00\u4e2a\u968f\u673a\u4e0d\u91cd\u590d\u7684\u5b57\u7b26\u4e32","permalink":"/blog/getRandomUid"},"nextItem":{"title":"\u4e24\u4e2a\u5217\u8868\u533a\u57df\u540c\u6b65\u6eda\u52a8","permalink":"/blog/syncScrolling"}},"content":"### \u76ee\u6807\\n\u5f53\u9875\u9762\u51fa\u73b0\u6a2a\u5411\u6eda\u52a8\u6761\u7684\u65f6\u5019\uff0c\u60f3\u8981\u5de6\u53f3\u6eda\u52a8\u53ea\u80fd\u901a\u8fc7\u62d6\u52a8\u6eda\u52a8\u6761\u7684\u65b9\u5f0f\uff0c\u4e0d\u65b9\u4fbf\u7528\u6237\u64cd\u4f5c\uff0c\u8981\u5b9e\u73b0\u7684\u662f\u901a\u8fc7\u9f20\u6807\u7684\u62d6\u52a8\u5b9e\u73b0\u9875\u9762\u7684\u6a2a\u5411\u6eda\u52a8\\n\\n### \u539f\u7406\\n\u901a\u8fc7\u8bb0\u5f55\u9f20\u6807\u6309\u4e0b\u548c\u79fb\u52a8\u7684\u8ddd\u79bb\u8bbe\u7f6e\u6eda\u52a8\u6761\u7684\u6eda\u52a8\u8ddd\u79bb\\n\\n### \u5b9e\u73b0\\n\\n* \u5e26\u963b\u5c3c\u611f\u7684\u62d6\u52a8\uff0c\u66f4\u597d\u7684\u6a21\u62df\u539f\u751f\u6eda\u52a8\\n```js\\nfunction mouseMoveSimulationScroll(el) {\\n  if (!el) return\\n  let startScroll = 0;\\n  let startX = 0;\\n  let previousX = 0; // \u4fdd\u5b58\u4e0a\u4e00\u6b21\u7684clientX\u5750\u6807\\n  let currentX = 0; // \u83b7\u53d6\u6bcf\u6b21\u79fb\u52a8\u7684\u4f4d\u7f6e\\n  let velocity = 0; // \u63a7\u5236\u901f\u5ea6\\n  let direction = 0; // \u63a7\u5236\u5de6\u53f3\u6ed1\u52a8\\n  let momentum = 0.875; // \u63a7\u5236\u6ed1\u52a8\u8ddd\u79bb\\n  let momentumInterval = null;\\n  let velocityInterval = null;\\n  el.onmousedown = function (event) {\\n    startScroll = el.scrollLeft;\\n    startX = event.clientX;\\n    previousX = startX;\\n    currentX = startX;\\n    clearInterval(velocityInterval);\\n    velocityInterval = setInterval(function () {\\n      // previousX\u4fdd\u5b58\u4e0a\u4e00\u6b21\u79fb\u52a8\u9f20\u6807\u7684clientX\u503c\\n      // \u6162\u901f\u79fb\u52a8\u65f6currentX\u4e0epreviousX\u6570\u503c\u76f8\u540c\u6216\u8005\u5dee\u503c\u8f83\u5c0f\uff08\u6162\u901f\u79fb\u52a8\u9f20\u6807\u4e00\u76f4\u5728\u4e00\u4e2a\u70b9\u4e0a\uff09\\n      // \u5feb\u901f\u6ed1\u52a8\u65f6\u9f20\u6807\u5de6\u6ed1previousX\u5927\u4e8ecurrentX\uff0c\u53f3\u6ed1currentX\u5927\u4e8epreviousX\\n      // \u539f\u7406\uff1a\u5f53\u5feb\u901f\u79fb\u52a8\u65f6\uff0c\u677e\u5f00\u9f20\u6807\u7684\u65f6\u5019\u5df2\u7ecf\u4e0d\u5728\u5f53\u65f6\u70b9\u51fb\u7684\u70b9\u4f4d\u4e0a\uff0c50\u6beb\u79d2\u540e\u5c31\u51fa\u73b0\u4e862\u4e2a\u53d8\u91cf\u7684\u6570\u503c\u5dee\\n      // \u539f\u56e0\uff1a\u9f20\u6807\u79fb\u52a8\u65f6\uff0c\u4e0d\u4f1a\u5b58\u50a8\u6240\u6709\u7684\u79fb\u52a8\u4fe1\u606f\u3002\u5c24\u5176\u662f\u5728\u5feb\u901f\u79fb\u52a8\u9f20\u6807\u65f6\\n      velocity = Math.abs(currentX - previousX);\\n      // \u6b63\u8d1f\u6570\u8f6c\u6362\u7528\u4e8e\u63a7\u5236\u5de6\u53f3\u6ed1\u52a8\\n      // \u5de6\u6ed1\u52a8\u4e3a\u6b63\u6570\uff0c\u53f3\u6ed1\u52a8\u4e3a\u8d1f\u6570\\n      direction = currentX > previousX ? -1 : 1;\\n\\n      previousX = currentX;\\n    }, 50);\\n    el.onmousemove = function(event) {\\n      currentX = event.clientX;\\n      el.scrollLeft = startScroll + (startX - currentX);\\n    }\\n    el.onmouseleave = function () {\\n      el.onmousemove = null\\n    };\\n    el.onmouseup = function () {\\n      let num = 0;\\n      clearInterval(velocityInterval);\\n      clearInterval(momentumInterval);\\n      num = velocity;\\n      // \u9f20\u6807\u677e\u5f00\u540e\u5f00\u59cb\u6267\u884c\u6ed1\u52a8\\n      momentumInterval = setInterval(function () {\\n        // \u6ed1\u52a8\u8ddd\u79bb\u4f9d\u6b21\u51cf\u5c0f\\n        el.scrollLeft = el.scrollLeft + num * direction;\\n        // \u6570\u503c\u4f9d\u6b21\u51cf\u5c0f\\n        num *= momentum;\\n        // \u5c0f\u4e8e1\u9500\u6bc1\u5b9a\u65f6\u5668\uff0c\u6ed1\u52a8\u7ed3\u675f\\n        if (Math.abs(num) < 1) {\\n          clearInterval(momentumInterval);\\n        }\\n      }, 15);\\n      el.onmousemove = null\\n      el.onmouseleave = null\\n      el.onmouseup = null\\n    };\\n  };\\n\\n}\\n\\n```\\n\\n* \u4ec5\u4ec5\u662f\u62d6\u52a8\uff0c\u7b80\u5355\u7684\u5b9e\u73b0\\n```js\\nfunction handlemousedownControlScroll(evt, el) {\\n  const scrollLeft = el.scrollLeft\\n  const startPos = evt.clientX\\n  document.onmouseup = function() {\\n    document.onmousemove = null\\n  }\\n  document.onmouseleave = function() {\\n    document.onmousemove = null\\n  }\\n  if (evt.which === 3) {\\n    document.onmousemove = function(e) {\\n      el.scrollLeft = scrollLeft + (startPos - e.clientX)\\n    }\\n  }\\n}\\n\\n```"},{"id":"syncScrolling","metadata":{"permalink":"/blog/syncScrolling","editUrl":"https://github.com/jonbenery/weblog/blog/2023-01-30-syncScrolling/index.md","source":"@site/blog/2023-01-30-syncScrolling/index.md","title":"\u4e24\u4e2a\u5217\u8868\u533a\u57df\u540c\u6b65\u6eda\u52a8","description":"\u76ee\u6807","date":"2023-01-30T00:00:00.000Z","formattedDate":"January 30, 2023","tags":[{"label":"javascript","permalink":"/blog/tags/javascript"}],"readingTime":2.535,"hasTruncateMarker":false,"authors":[{"name":"\u8d75\u9526\u5f6c","title":"coder javascript","url":"https://github.com/endiliey","imageURL":"https://github.com/endiliey.png","key":"jonben"}],"frontMatter":{"slug":"syncScrolling","title":"\u4e24\u4e2a\u5217\u8868\u533a\u57df\u540c\u6b65\u6eda\u52a8","authors":"jonben","tags":["javascript"]},"prevItem":{"title":"\u9f20\u6807\u7684\u62d6\u62fd\u6a21\u62df\u6eda\u52a8\u6761\u6eda\u52a8","permalink":"/blog/mousemoveSimulationScroll"}},"content":"### \u76ee\u6807\\n\u9875\u9762\u4e2d\u6709\u4e24\u4e2a\u5217\u8868\u5143\u7d20\uff0c\u5176\u4e2d\u4e00\u4e2a\u5143\u7d20\u7684\u6eda\u52a8\u8981\u548c\u4e00\u4e2a\u5143\u7d20\u7684\u6eda\u52a8\u540c\u6b65\\n\\n### \u539f\u7406\\n * \u76d1\u542c\u5143\u7d20\u5bf9\u8c61\u7684\u6eda\u52a8\u6761\u4e8b\u4ef6\\n```js\\nvar box = document.getElementById(\'box\') // \u83b7\u53d6id\u4e3abox\u7684\u5143\u7d20\\nbox.onscroll = function() {\\n    // box\u7684\u6eda\u52a8\u6761\u6eda\u52a8\u65f6\u89e6\u53d1\\n}\\n\\n```\\n* \u6eda\u52a8\u6761\u7684\u5c5e\u6027\\n```js\\n// \u5782\u76f4\u6eda\u52a8\u6761\\nbox.scrollHeight // \u53ef\u6eda\u52a8\u7684\u9ad8\u5ea6\\nbox.clientHeight // \u6ed1\u5757\u7684\u9ad8\u5ea6\\nbox.scrollTop // \u5df2\u7eb5\u5411\u6eda\u52a8\u7684\u8ddd\u79bb\\n// \u6c34\u5e73\u6eda\u52a8\u6761\\nbox.scrollWidth // \u53ef\u6eda\u52a8\u7684\u5bbd\u5ea6\\nbox.clientWidth // \u6ed1\u5757\u7684\u5bbd\u5ea6\\nbox.scrollLeft // \u5df2\u6a2a\u5411\u6eda\u52a8\u7684\u8ddd\u79bb\\n\\n```\\n\\n### \u601d\u8def\\n\u76d1\u542c\u7b2c\u4e00\u4e2a\u6eda\u52a8\u6761\uff0c\u5f53\u6eda\u52a8\u6761\u6eda\u52a8\u65f6\uff0c\u83b7\u53d6\u7b2c\u4e00\u4e2a\u6eda\u52a8\u6761\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u6539\u53d8\u7b2c\u4e8c\u4e2a\u6eda\u52a8\u6761\u7684\u4f4d\u7f6e\uff1b\\n\u76d1\u542c\u7b2c\u4e8c\u4e2a\u6eda\u52a8\u6761\uff0c\u5f53\u6eda\u52a8\u6761\u6eda\u52a8\u65f6\uff0c\u83b7\u53d6\u7b2c\u4e8c\u4e2a\u6eda\u52a8\u6761\u7684\u4f4d\u7f6e\uff0c\u7136\u540e\u6539\u53d8\u7b2c\u4e00\u4e2a\u6eda\u52a8\u6761\u7684\u4f4d\u7f6e\u3002\\n\\n### \u5b9e\u73b0\\n```js\\nlet first = document.getElementById(\'first\')\\nlet second = document.getElementById(\'second\')\\nfirst.onscroll = () => {\\n  second.scrollTop = first.scrollTop / (first.scrollHeight - first.clientHeight) * (second.scrollHeight - second.clientHeight) // \u6309\u767e\u5206\u6bd4\u540c\u6b65\u4f4d\u7f6e\\n}\\nsecond.onscroll = () => {\\n  first.scrollTop = second.scrollTop / (second.scrollHeight - second.clientHeight) * (first.scrollHeight - first.clientHeight)\\n}\\n\\n\\n```\\n### \u51fa\u73b0\u7684\u95ee\u9898\\n\u7531\u4e8e\u7b2c\u4e00\u4e2a\u5143\u7d20\u6eda\u52a8\u65f6\u89e6\u53d1\u4e86\u7b2c\u4e8c\u4e2a\u5143\u7d20\u7684\u6eda\u52a8\uff0c\u4e24\u4e2a\u5143\u7d20\u7684\u6eda\u52a8\u88ab\u76f8\u4e92\u5236\u7ea6\\n\\n### \u4fee\u590d\u95ee\u9898\\n\u4e8e\u662f\uff0c\u6211\u4f7f\u7528\u4e24\u4e2a\u53d8\u91cffirstchange\u548csecondchange\u5206\u522b\u8868\u793a\u5141\u8bb8\u7b2c\u4e00\u4e2a\u5143\u7d20\u6eda\u52a8\u548c\u5141\u8bb8\u7b2c\u4e8c\u4e2a\u5143\u7d20\u6eda\u52a8\uff1b\\n\u5f53\u7b2c\u4e00\u4e2a\u5143\u7d20\u9996\u5148\u89e6\u53d1\u6eda\u52a8\u65f6\uff0c\u8bbe\u7f6esecondchange\u4e3afalse\uff1b\\n\u7b2c\u4e8c\u4e2a\u5143\u7d20\u89e6\u53d1\u65f6\uff0c\u6839\u636esecondchange\uff0c\u4e0d\u5bf9\u5143\u7d20\u8fdb\u884c\u6eda\u52a8\uff0c\u7136\u540e\u5c06\u8bbe\u7f6esecondchange\u8bbe\u7f6e\u56detrue\uff0c\u5b8c\u6210\u4e00\u6b21\u540c\u6b65\u6eda\u52a8\u3002\\n\u7b2c\u4e8c\u4e2a\u5143\u7d20\u9996\u5148\u89e6\u53d1\u6eda\u52a8\u65f6\u7c7b\u4f3c\u3002\\n\\n### \u6700\u7ec8\u7ed3\u679c\\n```js\\nlet first = document.getElementById(\'first\')\\nlet second = document.getElementById(\'second\')\\nlet firstchange = true\\nlet secondchange = true\\nfirst.onscroll = () => {\\n  if (firstchange) {\\n    second.scrollTop = first.scrollTop / (first.scrollHeight - first.clientHeight) * (second.scrollHeight - second.clientHeight)\\n    secondchange = false\\n  } else {\\n    firstchange = true\\n  }\\n}\\nsecond.onscroll = () => {\\n  if (secondchange) {\\n    first.scrollTop = second.scrollTop / (second.scrollHeight - second.clientHeight) * (first.scrollHeight - first.clientHeight)\\n    firstchange = false\\n  } else {\\n    secondchange = true\\n  }\\n}\\n\\n```"}]}')}}]);